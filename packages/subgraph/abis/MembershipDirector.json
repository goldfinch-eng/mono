{
  "address": "0xa85b028984bC54A2a3D844B070544F59dDDf89DE",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "contract Context",
          "name": "_context",
          "type": "address"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "int256",
          "name": "x",
          "type": "int256"
        }
      ],
      "name": "ExpTooLarge",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidPositionType",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "InvalidVaultPosition",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "int256",
          "name": "x",
          "type": "int256"
        }
      ],
      "name": "LnNonRealResult",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "int256",
          "name": "x",
          "type": "int256"
        }
      ],
      "name": "LnTooLarge",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "owner",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "rewards",
          "type": "uint256"
        }
      ],
      "name": "RewardsClaimed",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "gfi",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "capital",
          "type": "uint256"
        }
      ],
      "name": "calculateMembershipScore",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "claimableRewards",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "collectRewards",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "rewards",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "consumeDeposit",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "consumeWithdraw",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "owner",
          "type": "address"
        }
      ],
      "name": "currentScore",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "eligibleScore",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "totalScore",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "memberAddress",
          "type": "address"
        },
        {
          "internalType": "int256",
          "name": "gfi",
          "type": "int256"
        },
        {
          "internalType": "int256",
          "name": "capital",
          "type": "int256"
        }
      ],
      "name": "estimateMemberScore",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "score",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "totalMemberScores",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "eligibleTotal",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "nextEpochTotal",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "transactionHash": "0xbf5502c2f46a99c50bb9b516112a4d498822978e92cfbeec6c70b0118ad599c3",
  "receipt": {
    "to": null,
    "from": "0x70997970C51812dc3A010C7d01b50e0d17dc79C8",
    "contractAddress": "0xa85b028984bC54A2a3D844B070544F59dDDf89DE",
    "transactionIndex": 0,
    "gasUsed": "2371571",
    "logsBloom": "0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000",
    "blockHash": "0xc570ec6c4df6684db0ddc97be71ab47055dea45c2a72abe5ade76a8bc481a139",
    "transactionHash": "0xbf5502c2f46a99c50bb9b516112a4d498822978e92cfbeec6c70b0118ad599c3",
    "logs": [],
    "blockNumber": 90,
    "cumulativeGasUsed": "2371571",
    "status": 1,
    "byzantium": true
  },
  "args": [
    "0x093e8F4d8f267d2CeEc9eB889E2054710d187beD"
  ],
  "solcInputHash": "feca2c9bb177f8f194b1316942dd25e6",
  "metadata": "{\"compiler\":{\"version\":\"0.8.16+commit.07a7930e\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[{\"internalType\":\"contract Context\",\"name\":\"_context\",\"type\":\"address\"}],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"inputs\":[{\"internalType\":\"int256\",\"name\":\"x\",\"type\":\"int256\"}],\"name\":\"ExpTooLarge\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidPositionType\",\"type\":\"error\"},{\"inputs\":[],\"name\":\"InvalidVaultPosition\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"int256\",\"name\":\"x\",\"type\":\"int256\"}],\"name\":\"LnNonRealResult\",\"type\":\"error\"},{\"inputs\":[{\"internalType\":\"int256\",\"name\":\"x\",\"type\":\"int256\"}],\"name\":\"LnTooLarge\",\"type\":\"error\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint256\",\"name\":\"rewards\",\"type\":\"uint256\"}],\"name\":\"RewardsClaimed\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"uint256\",\"name\":\"gfi\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"capital\",\"type\":\"uint256\"}],\"name\":\"calculateMembershipScore\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"claimableRewards\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"collectRewards\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"rewards\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"consumeDeposit\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"consumeWithdraw\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"\",\"type\":\"uint256\"}],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"owner\",\"type\":\"address\"}],\"name\":\"currentScore\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"eligibleScore\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"totalScore\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"memberAddress\",\"type\":\"address\"},{\"internalType\":\"int256\",\"name\":\"gfi\",\"type\":\"int256\"},{\"internalType\":\"int256\",\"name\":\"capital\",\"type\":\"int256\"}],\"name\":\"estimateMemberScore\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"score\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"totalMemberScores\",\"outputs\":[{\"internalType\":\"uint256\",\"name\":\"eligibleTotal\",\"type\":\"uint256\"},{\"internalType\":\"uint256\",\"name\":\"nextEpochTotal\",\"type\":\"uint256\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"events\":{\"RewardsClaimed(address,uint256)\":{\"params\":{\"owner\":\"the owner claiming rewards\",\"rewards\":\"amount of fidu claimed\"}}},\"kind\":\"dev\",\"methods\":{\"calculateMembershipScore(uint256,uint256)\":{\"params\":{\"capital\":\"Amount of capital in USDC\",\"gfi\":\"Amount of gfi\"},\"returns\":{\"_0\":\"membership score\"}},\"claimableRewards(address)\":{\"params\":{\"owner\":\"address to calculate claimable rewards for\"},\"returns\":{\"_0\":\"the amount of rewards that could be claimed by the caller\"}},\"collectRewards(address)\":{\"params\":{\"owner\":\"address to claim rewards for\"},\"returns\":{\"rewards\":\"amount of yield enhancements collected\"}},\"consumeDeposit(address)\":{\"params\":{\"owner\":\"address that performed the depositing\"},\"returns\":{\"_0\":\"id of membership position\"}},\"consumeWithdraw(address)\":{\"params\":{\"owner\":\"address that performed the withdrawing\"},\"returns\":{\"_0\":\"id of membership position\"}},\"currentScore(address)\":{\"params\":{\"owner\":\"address to check the score of\"},\"returns\":{\"eligibleScore\":\"score that is currently eligible for rewards\",\"totalScore\":\"score that will be elgible for rewards next epoch\"}},\"estimateMemberScore(address,int256,int256)\":{\"params\":{\"capital\":\"the change in gfi holdings, denominated in USDC\",\"gfi\":\"the change in gfi holdings, denominated in GFI\",\"memberAddress\":\"the member's address\"},\"returns\":{\"score\":\"resulting score for the member given the GFI and capital changes\"}},\"totalMemberScores()\":{\"returns\":{\"eligibleTotal\":\"sum of all member scores that are currently eligible\",\"nextEpochTotal\":\"sum of all member scores that will be eligible next epoch\"}}},\"version\":1},\"userdoc\":{\"errors\":{\"ExpTooLarge(int256)\":[{\"notice\":\"Thrown when exp is given too large of an argument\"}],\"LnNonRealResult(int256)\":[{\"notice\":\"Thrown when the natural log would have returned a number outside of \\u211d\"}],\"LnTooLarge(int256)\":[{\"notice\":\"Thrown when the natural log function is given too large of an argument\"}]},\"events\":{\"RewardsClaimed(address,uint256)\":{\"notice\":\"Emitted when `owner` claims fidu `rewards`\"}},\"kind\":\"user\",\"methods\":{\"calculateMembershipScore(uint256,uint256)\":{\"notice\":\"Calculate the membership score\"},\"claimableRewards(address)\":{\"notice\":\"Check how many rewards are claimable for the caller. The return  value here is how much would be retrieved by calling `collectRewards`.\"},\"collectRewards(address)\":{\"notice\":\"Collect all membership yield enhancements for the caller.\"},\"consumeDeposit(address)\":{\"notice\":\"Notify that the owner has deposited some assets, which  may affect membership.\"},\"consumeWithdraw(address)\":{\"notice\":\"Notify that the owner has withdrawn some assets, which  may affect membership.\"},\"currentScore(address)\":{\"notice\":\"Get the current score of `owner`\"},\"estimateMemberScore(address,int256,int256)\":{\"notice\":\"Estimate the score for an existing member, given some changes in GFI and capital\"},\"totalMemberScores()\":{\"notice\":\"Get the sum of all member scores that are currently eligible and that will be eligible next epoch\"}},\"version\":1}},\"settings\":{\"compilationTarget\":{\"contracts/protocol/core/membership/MembershipDirector.sol\":\"MembershipDirector\"},\"evmVersion\":\"london\",\"libraries\":{\":__CACHE_BREAKER__\":\"0x0000000000000031363637393139343933303138\"},\"metadata\":{\"bytecodeHash\":\"ipfs\",\"useLiteralContent\":true},\"optimizer\":{\"enabled\":true,\"runs\":100},\"remappings\":[]},\"sources\":{\"@openzeppelin/contracts-upgradeable/interfaces/IERC20Upgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../token/ERC20/IERC20Upgradeable.sol\\\";\\n\",\"keccak256\":\"0xe6220d2b5a54ac7497313ce4503cca742b09dc5e3a4eb76fb0afff85b1b97a34\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/interfaces/IERC721Upgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../token/ERC721/IERC721Upgradeable.sol\\\";\\n\",\"keccak256\":\"0x28c8a2c5850343f4fb44847b736df5a89fb16c90971c8c06c8066c04ad9b70df\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev This is a base contract to aid in writing upgradeable contracts, or any kind of contract that will be deployed\\n * behind a proxy. Since a proxied contract can't have a constructor, it's common to move constructor logic to an\\n * external initializer function, usually called `initialize`. It then becomes necessary to protect this initializer\\n * function so it can only be called once. The {initializer} modifier provided by this contract will have this effect.\\n *\\n * TIP: To avoid leaving the proxy in an uninitialized state, the initializer function should be called as early as\\n * possible by providing the encoded function call as the `_data` argument to {ERC1967Proxy-constructor}.\\n *\\n * CAUTION: When used with inheritance, manual care must be taken to not invoke a parent initializer twice, or to ensure\\n * that all initializers are idempotent. This is not verified automatically as constructors are by Solidity.\\n */\\nabstract contract Initializable {\\n    /**\\n     * @dev Indicates that the contract has been initialized.\\n     */\\n    bool private _initialized;\\n\\n    /**\\n     * @dev Indicates that the contract is in the process of being initialized.\\n     */\\n    bool private _initializing;\\n\\n    /**\\n     * @dev Modifier to protect an initializer function from being invoked twice.\\n     */\\n    modifier initializer() {\\n        require(_initializing || !_initialized, \\\"Initializable: contract is already initialized\\\");\\n\\n        bool isTopLevelCall = !_initializing;\\n        if (isTopLevelCall) {\\n            _initializing = true;\\n            _initialized = true;\\n        }\\n\\n        _;\\n\\n        if (isTopLevelCall) {\\n            _initializing = false;\\n        }\\n    }\\n}\\n\",\"keccak256\":\"0x8b2abd85d0ece7e866e100e9d47ca9cbec93c87cf71a8d267b2b93eb81f7d5e9\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/token/ERC20/IERC20Upgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC20 standard as defined in the EIP.\\n */\\ninterface IERC20Upgradeable {\\n    /**\\n     * @dev Returns the amount of tokens in existence.\\n     */\\n    function totalSupply() external view returns (uint256);\\n\\n    /**\\n     * @dev Returns the amount of tokens owned by `account`.\\n     */\\n    function balanceOf(address account) external view returns (uint256);\\n\\n    /**\\n     * @dev Moves `amount` tokens from the caller's account to `recipient`.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transfer(address recipient, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Returns the remaining number of tokens that `spender` will be\\n     * allowed to spend on behalf of `owner` through {transferFrom}. This is\\n     * zero by default.\\n     *\\n     * This value changes when {approve} or {transferFrom} are called.\\n     */\\n    function allowance(address owner, address spender) external view returns (uint256);\\n\\n    /**\\n     * @dev Sets `amount` as the allowance of `spender` over the caller's tokens.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * IMPORTANT: Beware that changing an allowance with this method brings the risk\\n     * that someone may use both the old and the new allowance by unfortunate\\n     * transaction ordering. One possible solution to mitigate this race\\n     * condition is to first reduce the spender's allowance to 0 and set the\\n     * desired value afterwards:\\n     * https://github.com/ethereum/EIPs/issues/20#issuecomment-263524729\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address spender, uint256 amount) external returns (bool);\\n\\n    /**\\n     * @dev Moves `amount` tokens from `sender` to `recipient` using the\\n     * allowance mechanism. `amount` is then deducted from the caller's\\n     * allowance.\\n     *\\n     * Returns a boolean value indicating whether the operation succeeded.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(\\n        address sender,\\n        address recipient,\\n        uint256 amount\\n    ) external returns (bool);\\n\\n    /**\\n     * @dev Emitted when `value` tokens are moved from one account (`from`) to\\n     * another (`to`).\\n     *\\n     * Note that `value` may be zero.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 value);\\n\\n    /**\\n     * @dev Emitted when the allowance of a `spender` for an `owner` is set by\\n     * a call to {approve}. `value` is the new allowance.\\n     */\\n    event Approval(address indexed owner, address indexed spender, uint256 value);\\n}\\n\",\"keccak256\":\"0xf449ca0a763d4b1b4462cf8706857074492f324020a2b9d099181b5383055ad3\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/token/ERC721/IERC721Upgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\nimport \\\"../../utils/introspection/IERC165Upgradeable.sol\\\";\\n\\n/**\\n * @dev Required interface of an ERC721 compliant contract.\\n */\\ninterface IERC721Upgradeable is IERC165Upgradeable {\\n    /**\\n     * @dev Emitted when `tokenId` token is transferred from `from` to `to`.\\n     */\\n    event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);\\n\\n    /**\\n     * @dev Emitted when `owner` enables `approved` to manage the `tokenId` token.\\n     */\\n    event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId);\\n\\n    /**\\n     * @dev Emitted when `owner` enables or disables (`approved`) `operator` to manage all of its assets.\\n     */\\n    event ApprovalForAll(address indexed owner, address indexed operator, bool approved);\\n\\n    /**\\n     * @dev Returns the number of tokens in ``owner``'s account.\\n     */\\n    function balanceOf(address owner) external view returns (uint256 balance);\\n\\n    /**\\n     * @dev Returns the owner of the `tokenId` token.\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must exist.\\n     */\\n    function ownerOf(uint256 tokenId) external view returns (address owner);\\n\\n    /**\\n     * @dev Safely transfers `tokenId` token from `from` to `to`, checking first that contract recipients\\n     * are aware of the ERC721 protocol to prevent tokens from being forever locked.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must exist and be owned by `from`.\\n     * - If the caller is not `from`, it must be have been allowed to move this token by either {approve} or {setApprovalForAll}.\\n     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function safeTransferFrom(\\n        address from,\\n        address to,\\n        uint256 tokenId\\n    ) external;\\n\\n    /**\\n     * @dev Transfers `tokenId` token from `from` to `to`.\\n     *\\n     * WARNING: Usage of this method is discouraged, use {safeTransferFrom} whenever possible.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must be owned by `from`.\\n     * - If the caller is not `from`, it must be approved to move this token by either {approve} or {setApprovalForAll}.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function transferFrom(\\n        address from,\\n        address to,\\n        uint256 tokenId\\n    ) external;\\n\\n    /**\\n     * @dev Gives permission to `to` to transfer `tokenId` token to another account.\\n     * The approval is cleared when the token is transferred.\\n     *\\n     * Only a single account can be approved at a time, so approving the zero address clears previous approvals.\\n     *\\n     * Requirements:\\n     *\\n     * - The caller must own the token or be an approved operator.\\n     * - `tokenId` must exist.\\n     *\\n     * Emits an {Approval} event.\\n     */\\n    function approve(address to, uint256 tokenId) external;\\n\\n    /**\\n     * @dev Returns the account approved for `tokenId` token.\\n     *\\n     * Requirements:\\n     *\\n     * - `tokenId` must exist.\\n     */\\n    function getApproved(uint256 tokenId) external view returns (address operator);\\n\\n    /**\\n     * @dev Approve or remove `operator` as an operator for the caller.\\n     * Operators can call {transferFrom} or {safeTransferFrom} for any token owned by the caller.\\n     *\\n     * Requirements:\\n     *\\n     * - The `operator` cannot be the caller.\\n     *\\n     * Emits an {ApprovalForAll} event.\\n     */\\n    function setApprovalForAll(address operator, bool _approved) external;\\n\\n    /**\\n     * @dev Returns if the `operator` is allowed to manage all of the assets of `owner`.\\n     *\\n     * See {setApprovalForAll}\\n     */\\n    function isApprovedForAll(address owner, address operator) external view returns (bool);\\n\\n    /**\\n     * @dev Safely transfers `tokenId` token from `from` to `to`.\\n     *\\n     * Requirements:\\n     *\\n     * - `from` cannot be the zero address.\\n     * - `to` cannot be the zero address.\\n     * - `tokenId` token must exist and be owned by `from`.\\n     * - If the caller is not `from`, it must be approved to move this token by either {approve} or {setApprovalForAll}.\\n     * - If `to` refers to a smart contract, it must implement {IERC721Receiver-onERC721Received}, which is called upon a safe transfer.\\n     *\\n     * Emits a {Transfer} event.\\n     */\\n    function safeTransferFrom(\\n        address from,\\n        address to,\\n        uint256 tokenId,\\n        bytes calldata data\\n    ) external;\\n}\\n\",\"keccak256\":\"0xfbb3ca7272af58dc245a20e91a1f68481ee04706fa3fe46d184000efc21f4bad\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/utils/introspection/IERC165Upgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Interface of the ERC165 standard, as defined in the\\n * https://eips.ethereum.org/EIPS/eip-165[EIP].\\n *\\n * Implementers can declare support of contract interfaces, which can then be\\n * queried by others ({ERC165Checker}).\\n *\\n * For an implementation, see {ERC165}.\\n */\\ninterface IERC165Upgradeable {\\n    /**\\n     * @dev Returns true if this contract implements the interface defined by\\n     * `interfaceId`. See the corresponding\\n     * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[EIP section]\\n     * to learn more about how these ids are created.\\n     *\\n     * This function call must use less than 30 000 gas.\\n     */\\n    function supportsInterface(bytes4 interfaceId) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x1c4860acd323e34a67b3e97faab9aaa55fe8e92b1dcf08b5f47f3468d58ce75c\",\"license\":\"MIT\"},\"@openzeppelin/contracts-upgradeable/utils/math/MathUpgradeable.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.0;\\n\\n/**\\n * @dev Standard math utilities missing in the Solidity language.\\n */\\nlibrary MathUpgradeable {\\n    /**\\n     * @dev Returns the largest of two numbers.\\n     */\\n    function max(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a >= b ? a : b;\\n    }\\n\\n    /**\\n     * @dev Returns the smallest of two numbers.\\n     */\\n    function min(uint256 a, uint256 b) internal pure returns (uint256) {\\n        return a < b ? a : b;\\n    }\\n\\n    /**\\n     * @dev Returns the average of two numbers. The result is rounded towards\\n     * zero.\\n     */\\n    function average(uint256 a, uint256 b) internal pure returns (uint256) {\\n        // (a + b) / 2 can overflow.\\n        return (a & b) + (a ^ b) / 2;\\n    }\\n\\n    /**\\n     * @dev Returns the ceiling of the division of two numbers.\\n     *\\n     * This differs from standard division with `/` in that it rounds up instead\\n     * of rounding down.\\n     */\\n    function ceilDiv(uint256 a, uint256 b) internal pure returns (uint256) {\\n        // (a + b - 1) / b can overflow on addition, so we distribute.\\n        return a / b + (a % b == 0 ? 0 : 1);\\n    }\\n}\\n\",\"keccak256\":\"0xd10ce93bb60b3d8ad10fffca3d35594eba4a58e6c76a7ad96d184c326f88d9ac\",\"license\":\"MIT\"},\"contracts/cake/AccessControl.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol\\\";\\nimport \\\"../interfaces/IAccessControl.sol\\\";\\n\\n/// @title Cake access control\\n/// @author landakram\\n/// @notice This contact centralizes contract-to-contract access control using a simple\\n/// access-control list. There are two types of actors: operators and admins. Operators\\n/// are callers involved in a regular end-user tx. This would likely be another Goldfinch\\n/// contract for which the current contract is a dependency. Admins are callers allowed\\n/// for specific admin actions (like changing parameters, topping up funds, etc.).\\ncontract AccessControl is Initializable, IAccessControl {\\n  /// @dev Mapping from contract address to set of allowed operators\\n  mapping(address => mapping(address => bool)) public operators;\\n\\n  /// @dev Mapping from contract address to contract admin;\\n  mapping(address => address) public admins;\\n\\n  function initialize(address admin) public initializer {\\n    admins[address(this)] = admin;\\n  }\\n\\n  /// @inheritdoc IAccessControl\\n  function addOperator(address resource, address operator) external {\\n    requireSuperAdmin(msg.sender);\\n    operators[resource][operator] = true;\\n    emit OperatorAdded(resource, operator);\\n  }\\n\\n  /// @inheritdoc IAccessControl\\n  function removeOperator(address resource, address operator) external {\\n    requireSuperAdmin(msg.sender);\\n    delete operators[resource][operator];\\n    emit OperatorRemoved(resource, operator);\\n  }\\n\\n  /// @inheritdoc IAccessControl\\n  function setAdmin(address resource, address admin) external {\\n    requireSuperAdmin(msg.sender);\\n    admins[resource] = admin;\\n    emit AdminSet(resource, admin);\\n  }\\n\\n  /// @inheritdoc IAccessControl\\n  function requireOperator(address resource, address accessor) external view {\\n    if (accessor == address(0)) revert ZeroAddress();\\n    bool isOperator = operators[resource][accessor];\\n    if (!isOperator) revert RequiresOperator(resource, accessor);\\n  }\\n\\n  /// @inheritdoc IAccessControl\\n  function requireAdmin(address resource, address accessor) public view {\\n    if (accessor == address(0)) revert ZeroAddress();\\n    bool isAdmin = admins[resource] == accessor;\\n    if (!isAdmin) revert RequiresAdmin(resource, accessor);\\n  }\\n\\n  /// @inheritdoc IAccessControl\\n  function requireSuperAdmin(address accessor) public view {\\n    // The super admin is the admin of this AccessControl contract\\n    requireAdmin({resource: address(this), accessor: accessor});\\n  }\\n}\\n\",\"keccak256\":\"0x56b88f9e7e6a9da698a80d5b9dbb3ce5dd9b539a2b9125628c8cde3cbec72956\",\"license\":\"MIT\"},\"contracts/cake/Base.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.16;\\n\\nimport {Context} from \\\"./Context.sol\\\";\\nimport \\\"./Routing.sol\\\" as Routing;\\n\\nusing Routing.Context for Context;\\n\\n/// @title Base contract for application-layer\\n/// @author landakram\\n/// @notice This base contract is what all application-layer contracts should inherit from.\\n///  It provides `Context`, as well as some convenience functions for working with it and\\n///  using access control. All public methods on the inheriting contract should likely\\n///  use one of the modifiers to assert valid callers.\\nabstract contract Base {\\n  /// @dev this is safe for proxies as immutable causes the context to be written to\\n  ///  bytecode on deployment. The proxy then treats this as a constant.\\n  Context immutable context;\\n\\n  constructor(Context _context) {\\n    context = _context;\\n  }\\n\\n  modifier onlyOperator() {\\n    context.accessControl().requireOperator(address(this), msg.sender);\\n    _;\\n  }\\n\\n  modifier onlyAdmin() {\\n    context.accessControl().requireAdmin(address(this), msg.sender);\\n    _;\\n  }\\n}\\n\",\"keccak256\":\"0x9c945cf1a01543b91ada1a20464aaa7dba30c9cf7451d00bb3783d1e490efd8c\",\"license\":\"MIT\"},\"contracts/cake/Context.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.16;\\n\\nimport {AccessControl} from \\\"./AccessControl.sol\\\";\\nimport {Router} from \\\"./Router.sol\\\";\\nimport \\\"./Routing.sol\\\" as Routing;\\n\\nusing Routing.Context for Context;\\n\\n/// @title Entry-point for all application-layer contracts.\\n/// @author landakram\\n/// @notice This contract provides an interface for retrieving other contract addresses and doing access\\n///  control.\\ncontract Context {\\n  /// @notice Used for retrieving other contract addresses.\\n  /// @dev This variable is immutable. This is done to save gas, as it is expected to be referenced\\n  /// in every end-user call with a call-chain length > 0. Note that it is written into the contract\\n  /// bytecode at contract creation time, so if the contract is deployed as the implementation for proxies,\\n  /// every proxy will share the same Router address.\\n  Router public immutable router;\\n\\n  constructor(Router _router) {\\n    router = _router;\\n  }\\n}\\n\",\"keccak256\":\"0xa680415dd02e61f8cd730f3198096d73b40fddb2f7f46136fc20e02a173ec107\",\"license\":\"MIT\"},\"contracts/cake/Router.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol\\\";\\nimport {AccessControl} from \\\"./AccessControl.sol\\\";\\nimport \\\"./Routing.sol\\\" as Routing;\\n\\n/// @title Router\\n/// @author landakram\\n/// @notice This contract provides service discovery for contracts using the cake framework.\\n///   It can be used in conjunction with the convenience methods defined in the `Routing.Context`\\n///   and `Routing.Keys` libraries.\\ncontract Router is Initializable {\\n  /// @notice Mapping of keys to contract addresses. Keys are arbitrary uint16s in the\\n  /// `Routing.Keys` library.\\n  mapping(uint16 => address) public contracts;\\n\\n  function initialize(AccessControl accessControl) public initializer {\\n    contracts[Routing.Keys.AccessControl] = address(accessControl);\\n  }\\n\\n  /// @notice Associate a routing key to a contract address\\n  /// @dev This function is only callable by the Router admin\\n  /// @param key A routing key (defined in the `Routing.Keys` libary)\\n  /// @param addr A contract address\\n  function setContract(uint16 key, address addr) public {\\n    AccessControl accessControl = AccessControl(contracts[Routing.Keys.AccessControl]);\\n    accessControl.requireAdmin(address(this), msg.sender);\\n    contracts[key] = addr;\\n  }\\n}\\n\",\"keccak256\":\"0x53d21beac63546f191590270051f33755345ac7d08fd33a124e731dc7c740b7b\",\"license\":\"MIT\"},\"contracts/cake/Routing.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// solhint-disable const-name-snakecase\\n\\npragma solidity ^0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC20Upgradeable.sol\\\";\\n\\nimport {IMembershipVault} from \\\"../interfaces/IMembershipVault.sol\\\";\\nimport {IGFILedger} from \\\"../interfaces/IGFILedger.sol\\\";\\nimport {ICapitalLedger} from \\\"../interfaces/ICapitalLedger.sol\\\";\\nimport {IMembershipDirector} from \\\"../interfaces/IMembershipDirector.sol\\\";\\nimport {IMembershipOrchestrator} from \\\"../interfaces/IMembershipOrchestrator.sol\\\";\\nimport {IMembershipLedger} from \\\"../interfaces/IMembershipLedger.sol\\\";\\nimport {IMembershipCollector} from \\\"../interfaces/IMembershipCollector.sol\\\";\\n\\nimport {ISeniorPool} from \\\"../interfaces/ISeniorPool.sol\\\";\\nimport {IPoolTokens} from \\\"../interfaces/IPoolTokens.sol\\\";\\nimport {IStakingRewards} from \\\"../interfaces/IStakingRewards.sol\\\";\\n\\nimport {IERC20Splitter} from \\\"../interfaces/IERC20Splitter.sol\\\";\\nimport {Context as ContextContract} from \\\"./Context.sol\\\";\\nimport {IAccessControl} from \\\"../interfaces/IAccessControl.sol\\\";\\n\\nimport {Router} from \\\"./Router.sol\\\";\\n\\n/// @title Routing.Keys\\n/// @notice This library is used to define routing keys used by `Router`.\\n/// @dev We use uints instead of enums for several reasons. First, keys can be re-ordered\\n///   or removed. This is useful when routing keys are deprecated; they can be moved to a\\n///   different section of the file. Second, other libraries or contracts can define their\\n///   own routing keys independent of this global mapping. This is useful for test contracts.\\nlibrary Keys {\\n  uint16 internal constant AccessControl = 1;\\n  uint16 internal constant MembershipVault = 2;\\n  uint16 internal constant CapitalLedger = 3;\\n  uint16 internal constant GFILedger = 4;\\n  uint16 internal constant GFI = 5;\\n  uint16 internal constant MembershipDirector = 6;\\n  uint16 internal constant MembershipLedger = 7;\\n  uint16 internal constant MembershipCollector = 8;\\n  uint16 internal constant MembershipOrchestrator = 9;\\n  uint16 internal constant PoolTokens = 10;\\n  uint16 internal constant SeniorPool = 11;\\n  uint16 internal constant StakingRewards = 12;\\n  uint16 internal constant FIDU = 13;\\n  uint16 internal constant USDC = 14;\\n  uint16 internal constant ReserveSplitter = 15;\\n}\\n\\n/// @title Routing.Context\\n/// @notice This library provides convenience functions for getting contracts from `Router`.\\nlibrary Context {\\n  function accessControl(ContextContract context) internal view returns (IAccessControl) {\\n    return IAccessControl(context.router().contracts(Keys.AccessControl));\\n  }\\n\\n  function membershipVault(ContextContract context) internal view returns (IMembershipVault) {\\n    return IMembershipVault(context.router().contracts(Keys.MembershipVault));\\n  }\\n\\n  function capitalLedger(ContextContract context) internal view returns (ICapitalLedger) {\\n    return ICapitalLedger(context.router().contracts(Keys.CapitalLedger));\\n  }\\n\\n  function gfiLedger(ContextContract context) internal view returns (IGFILedger) {\\n    return IGFILedger(context.router().contracts(Keys.GFILedger));\\n  }\\n\\n  function gfi(ContextContract context) internal view returns (IERC20Upgradeable) {\\n    return IERC20Upgradeable(context.router().contracts(Keys.GFI));\\n  }\\n\\n  function membershipDirector(ContextContract context) internal view returns (IMembershipDirector) {\\n    return IMembershipDirector(context.router().contracts(Keys.MembershipDirector));\\n  }\\n\\n  function membershipOrchestrator(ContextContract context) internal view returns (IMembershipOrchestrator) {\\n    return IMembershipOrchestrator(context.router().contracts(Keys.MembershipOrchestrator));\\n  }\\n\\n  function stakingRewards(ContextContract context) internal view returns (IStakingRewards) {\\n    return IStakingRewards(context.router().contracts(Keys.StakingRewards));\\n  }\\n\\n  function poolTokens(ContextContract context) internal view returns (IPoolTokens) {\\n    return IPoolTokens(context.router().contracts(Keys.PoolTokens));\\n  }\\n\\n  function seniorPool(ContextContract context) internal view returns (ISeniorPool) {\\n    return ISeniorPool(context.router().contracts(Keys.SeniorPool));\\n  }\\n\\n  function fidu(ContextContract context) internal view returns (IERC20Upgradeable) {\\n    return IERC20Upgradeable(context.router().contracts(Keys.FIDU));\\n  }\\n\\n  function usdc(ContextContract context) internal view returns (IERC20Upgradeable) {\\n    return IERC20Upgradeable(context.router().contracts(Keys.USDC));\\n  }\\n\\n  function reserveSplitter(ContextContract context) internal view returns (IERC20Splitter) {\\n    return IERC20Splitter(context.router().contracts(Keys.ReserveSplitter));\\n  }\\n\\n  function membershipLedger(ContextContract context) internal view returns (IMembershipLedger) {\\n    return IMembershipLedger(context.router().contracts(Keys.MembershipLedger));\\n  }\\n\\n  function membershipCollector(ContextContract context) internal view returns (IMembershipCollector) {\\n    return IMembershipCollector(context.router().contracts(Keys.MembershipCollector));\\n  }\\n}\\n\",\"keccak256\":\"0x9eb4ce99bff8cc4669e0792620824e86250ad23d5cdc6a589d92fc7843b68393\",\"license\":\"MIT\"},\"contracts/interfaces/IAccessControl.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity ^0.8.16;\\n\\n/// @title Cake access control\\n/// @author landakram\\n/// @notice This contact centralizes contract-to-contract access control using a simple\\n/// access-control list. There are two types of actors: operators and admins. Operators\\n/// are callers involved in a regular end-user tx. This would likely be another Goldfinch\\n/// contract for which the current contract is a dependency. Admins are callers allowed\\n/// for specific admin actions (like changing parameters, topping up funds, etc.).\\ninterface IAccessControl {\\n  error RequiresAdmin(address resource, address accessor);\\n  error RequiresOperator(address resource, address accessor);\\n  error ZeroAddress();\\n\\n  event AdminSet(address indexed resource, address indexed admin);\\n  event OperatorAdded(address indexed resource, address indexed operator);\\n  event OperatorRemoved(address indexed resource, address indexed operator);\\n\\n  /// @notice Add an operator to the set of allowed operators for a given resource\\n  /// @param resource An address which with `operator` should be allowed to interact\\n  /// @param operator An address which should be allowed to operate on `resource`\\n  /// @dev This method is only callable by the super-admin (the admin of this AccessControl\\n  ///   contract)\\n  function addOperator(address resource, address operator) external;\\n\\n  /// @notice Remove an operator from the set of allowed operators for a given resource\\n  /// @param resource An address which with `operator` should be allowed to interact\\n  /// @param operator An address which should be allowed to operate on `resource`\\n  /// @dev This method is only callable by the super-admin (the admin of this AccessControl\\n  ///   contract)\\n  function removeOperator(address resource, address operator) external;\\n\\n  /// @notice Set an admin for a given resource\\n  /// @param resource An address which with `admin` should be allowed to administer\\n  /// @param admin An address which should be allowed to administer `resource`\\n  /// @dev This method is only callable by the super-admin (the admin of this AccessControl\\n  ///   contract)\\n  function setAdmin(address resource, address admin) external;\\n\\n  /// @notice Require a valid operator for a given resource\\n  /// @param resource An address that `accessor` is attempting to access\\n  /// @param accessor An address on which to assert access control checks\\n  /// @dev This method reverts when `accessor` is not a valid operator\\n  function requireOperator(address resource, address accessor) external view;\\n\\n  /// @notice Require a valid admin for a given resource\\n  /// @param resource An address that `accessor` is attempting to access\\n  /// @param accessor An address on which to assert access control checks\\n  /// @dev This method reverts when `accessor` is not a valid admin\\n  function requireAdmin(address resource, address accessor) external view;\\n\\n  /// @notice Require a super-admin. A super-admin is an admin of this AccessControl contract.\\n  /// @param accessor An address on which to assert access control checks\\n  /// @dev This method reverts when `accessor` is not a valid super-admin\\n  function requireSuperAdmin(address accessor) external view;\\n}\\n\",\"keccak256\":\"0xd7f297abb80fc3b4f5e374e52cb9f8675513291dc24b90703b969ed59f97a355\",\"license\":\"MIT\"},\"contracts/interfaces/ICapitalLedger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.8.16;\\n\\nenum CapitalAssetType {\\n  INVALID,\\n  ERC721\\n}\\n\\ninterface ICapitalLedger {\\n  /**\\n   * @notice Emitted when a new capital erc721 deposit has been made\\n   * @param owner addressing owning the deposit\\n   * @param assetAddress address of the deposited ERC721\\n   * @param positionId id for the deposit\\n   * @param assetTokenId id of the token from the ERC721 `assetAddress`\\n   * @param usdcEquivalent usdc equivalent value at the time of deposit\\n   * @param depositTimestamp block.timestamp of the deposit\\n   */\\n  event CapitalERC721Deposit(\\n    address indexed owner,\\n    address indexed assetAddress,\\n    uint256 positionId,\\n    uint256 assetTokenId,\\n    uint256 usdcEquivalent,\\n    uint256 depositTimestamp\\n  );\\n\\n  /**\\n   * @notice Emitted when a new ERC721 capital withdrawal has been made\\n   * @param owner addressing owning the deposit\\n   * @param positionId id for the capital position\\n   * @param assetAddress address of the underlying ERC721\\n   * @param depositTimestamp block.timestamp of the original deposit\\n   */\\n  event CapitalERC721Withdrawal(\\n    address indexed owner,\\n    uint256 positionId,\\n    address assetAddress,\\n    uint256 depositTimestamp\\n  );\\n\\n  /// Thrown when called with an invalid asset type for the function. Valid\\n  /// types are defined under CapitalAssetType\\n  error InvalidAssetType(CapitalAssetType);\\n\\n  /**\\n   * @notice Account for a deposit of `id` for the ERC721 asset at `assetAddress`.\\n   * @dev reverts with InvalidAssetType if `assetAddress` is not an ERC721\\n   * @param owner address that owns the position\\n   * @param assetAddress address of the ERC20 address\\n   * @param assetTokenId id of the ERC721 asset to add\\n   * @return id of the newly created position\\n   */\\n  function depositERC721(\\n    address owner,\\n    address assetAddress,\\n    uint256 assetTokenId\\n  ) external returns (uint256);\\n\\n  /**\\n   * @notice Get the id of the ERC721 asset held by position `id`. Pair this with\\n   *  `assetAddressOf` to get the address & id of the nft.\\n   * @dev reverts with InvalidAssetType if `assetAddress` is not an ERC721\\n   * @param positionId id of the position\\n   * @return id of the underlying ERC721 asset\\n   */\\n  function erc721IdOf(uint256 positionId) external view returns (uint256);\\n\\n  /**\\n   * @notice Completely withdraw a position\\n   * @param positionId id of the position\\n   */\\n  function withdraw(uint256 positionId) external;\\n\\n  /**\\n   * @notice Get the asset address of the position. Example: For an ERC721 position, this\\n   *  returns the address of that ERC721 contract.\\n   * @param positionId id of the position\\n   * @return asset address of the position\\n   */\\n  function assetAddressOf(uint256 positionId) external view returns (address);\\n\\n  /**\\n   * @notice Get the owner of a given position.\\n   * @param positionId id of the position\\n   * @return owner of the position\\n   */\\n  function ownerOf(uint256 positionId) external view returns (address);\\n\\n  /**\\n   * @notice Total number of positions in the ledger\\n   * @return number of positions in the ledger\\n   */\\n  function totalSupply() external view returns (uint256);\\n\\n  /**\\n   * @notice Get the number of capital positions held by an address\\n   * @param addr address\\n   * @return positions held by address\\n   */\\n  function balanceOf(address addr) external view returns (uint256);\\n\\n  /**\\n   * @notice Returns a position ID owned by `owner` at a given `index` of its position list\\n   * @param owner owner of the positions\\n   * @param index index of the owner's balance to get the position ID of\\n   * @return position id\\n   *\\n   * @dev use with {balanceOf} to enumerate all of `owner`'s positions\\n   */\\n  function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256);\\n\\n  /**\\n   * @dev Returns a position ID at a given `index` of all the positions stored by the contract.\\n   * @param index index to get the position ID at\\n   * @return position id\\n   *\\n   * @dev use with {totalSupply} to enumerate all positions\\n   */\\n  function tokenByIndex(uint256 index) external view returns (uint256);\\n\\n  /**\\n   * @notice Get the USDC value of `owner`s positions, reporting what is currently\\n   *  eligible and the total amount.\\n   * @param owner address owning the positions\\n   * @return eligibleAmount USDC value of positions eligible for rewards\\n   * @return totalAmount total USDC value of positions\\n   *\\n   * @dev this is used by Membership to determine how much is eligible in\\n   *  the current epoch vs the next epoch.\\n   */\\n  function totalsOf(address owner) external view returns (uint256 eligibleAmount, uint256 totalAmount);\\n}\\n\",\"keccak256\":\"0x7f09cfb9208fc6e66a347063bb9d226662bfeb455fc36e2ffea5afecf30b3801\",\"license\":\"MIT\"},\"contracts/interfaces/ICreditLine.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\npragma experimental ABIEncoderV2;\\n\\ninterface ICreditLine {\\n  function borrower() external view returns (address);\\n\\n  function limit() external view returns (uint256);\\n\\n  function maxLimit() external view returns (uint256);\\n\\n  function interestApr() external view returns (uint256);\\n\\n  function paymentPeriodInDays() external view returns (uint256);\\n\\n  function principalGracePeriodInDays() external view returns (uint256);\\n\\n  function termInDays() external view returns (uint256);\\n\\n  function lateFeeApr() external view returns (uint256);\\n\\n  function isLate() external view returns (bool);\\n\\n  function withinPrincipalGracePeriod() external view returns (bool);\\n\\n  // Accounting variables\\n  function balance() external view returns (uint256);\\n\\n  function interestOwed() external view returns (uint256);\\n\\n  function principalOwed() external view returns (uint256);\\n\\n  function termEndTime() external view returns (uint256);\\n\\n  function nextDueTime() external view returns (uint256);\\n\\n  function interestAccruedAsOf() external view returns (uint256);\\n\\n  function lastFullPaymentTime() external view returns (uint256);\\n}\\n\",\"keccak256\":\"0xd54b264344ce302597ee4f04f147000275d05c8fc9612cc21eaff915ff1f30c8\",\"license\":\"MIT\"},\"contracts/interfaces/IERC20Splitter.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.16;\\n\\ninterface IERC20Splitter {\\n  function lastDistributionAt() external view returns (uint256);\\n\\n  function distribute() external;\\n\\n  function replacePayees(address[] calldata _payees, uint256[] calldata _shares) external;\\n\\n  function pendingDistributionFor(address payee) external view returns (uint256);\\n}\\n\",\"keccak256\":\"0x000af1733ed42d532d5536d034b3efc6e09ceb3251701d7478c14de05aba5113\",\"license\":\"MIT\"},\"contracts/interfaces/IGFILedger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.8.16;\\n\\ninterface IGFILedger {\\n  /**\\n   * @notice Emitted when a new GFI deposit has been made\\n   * @param owner addressing owning the deposit\\n   * @param positionId id for the deposit\\n   * @param amount how much GFI was deposited\\n   * @param depositTimestamp block.timestamp of the deposit\\n   */\\n  event GFIDeposit(address indexed owner, uint256 indexed positionId, uint256 amount, uint256 depositTimestamp);\\n\\n  /**\\n   * @notice Emitted when a new GFI withdrawal has been made. If the remaining amount is 0, the position has bee removed\\n   * @param owner addressing owning the withdrawn position\\n   * @param positionId id for the position\\n   * @param remainingAmount how much GFI is remaining in the position\\n   * @param depositTimestamp block.timestamp of the original deposit\\n   */\\n  event GFIWithdrawal(\\n    address indexed owner,\\n    uint256 indexed positionId,\\n    uint256 withdrawnAmount,\\n    uint256 remainingAmount,\\n    uint256 depositTimestamp\\n  );\\n\\n  /**\\n   * @notice Account for a new deposit by the owner.\\n   * @param owner address to account for the deposit\\n   * @param amount how much was deposited\\n   * @return how much was deposited\\n   */\\n  function deposit(address owner, uint256 amount) external returns (uint256);\\n\\n  /**\\n   * @notice Account for a new withdraw by the owner.\\n   * @param positionId id of the position\\n   * @return how much was withdrawn\\n   */\\n  function withdraw(uint256 positionId) external returns (uint256);\\n\\n  /**\\n   * @notice Account for a new withdraw by the owner.\\n   * @param positionId id of the position\\n   * @param amount how much to withdraw\\n   * @return how much was withdrawn\\n   */\\n  function withdraw(uint256 positionId, uint256 amount) external returns (uint256);\\n\\n  /**\\n   * @notice Get the number of GFI positions held by an address\\n   * @param addr address\\n   * @return positions held by address\\n   */\\n  function balanceOf(address addr) external view returns (uint256);\\n\\n  /**\\n   * @notice Get the owner of a given position.\\n   * @param positionId id of the position\\n   * @return owner of the position\\n   */\\n  function ownerOf(uint256 positionId) external view returns (address);\\n\\n  /**\\n   * @notice Total number of positions in the ledger\\n   * @return number of positions in the ledger\\n   */\\n  function totalSupply() external view returns (uint256);\\n\\n  /**\\n   * @notice Returns a position ID owned by `owner` at a given `index` of its position list\\n   * @param owner owner of the positions\\n   * @param index index of the owner's balance to get the position ID of\\n   * @return position id\\n   *\\n   * @dev use with {balanceOf} to enumerate all of `owner`'s positions\\n   */\\n  function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256);\\n\\n  /**\\n   * @dev Returns a position ID at a given `index` of all the positions stored by the contract.\\n   * @param index index to get the position ID at\\n   * @return token id\\n   *\\n   * @dev use with {totalSupply} to enumerate all positions\\n   */\\n  function tokenByIndex(uint256 index) external view returns (uint256);\\n\\n  /**\\n   * @notice Get amount of GFI of `owner`s positions, reporting what is currently\\n   *  eligible and the total amount.\\n   * @return eligibleAmount GFI amount of positions eligible for rewards\\n   * @return totalAmount total GFI amount of positions\\n   *\\n   * @dev this is used by Membership to determine how much is eligible in\\n   *  the current epoch vs the next epoch.\\n   */\\n  function totalsOf(address owner) external view returns (uint256 eligibleAmount, uint256 totalAmount);\\n}\\n\",\"keccak256\":\"0x9c04c9f171b6138f7fb505d27666854dafe6ddcd7aaa67d7e03a96c81e68f54e\",\"license\":\"MIT\"},\"contracts/interfaces/IMembershipCollector.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.16;\\n\\ninterface IMembershipCollector {\\n  /// @notice Have the collector distribute `amount` of Fidu to `addr`\\n  /// @param addr address to distribute to\\n  /// @param amount amount to distribute\\n  function distributeFiduTo(address addr, uint256 amount) external;\\n\\n  /// @notice Get the last epoch finalized by the collector. This means the\\n  ///  collector will no longer add rewards to the epoch.\\n  /// @return the last finalized epoch\\n  function lastFinalizedEpoch() external view returns (uint256);\\n\\n  /// @notice Get the rewards associated with `epoch`. This amount may change\\n  ///  until `epoch` has been finalized (is less than or equal to getLastFinalizedEpoch)\\n  /// @return rewards associated with `epoch`\\n  function rewardsForEpoch(uint256 epoch) external view returns (uint256);\\n\\n  /// @notice Estimate rewards for a given epoch. For epochs at or before lastFinalizedEpoch\\n  ///  this will be the fixed, accurate reward for the epoch. For the current and other\\n  ///  non-finalized epochs, this will be the value as if the epoch were finalized in that\\n  ///  moment.\\n  /// @param epoch epoch to estimate the rewards of\\n  /// @return rewards associated with `epoch`\\n  function estimateRewardsFor(uint256 epoch) external view returns (uint256);\\n\\n  /// @notice Finalize all unfinalized epochs. Causes the reserve splitter to distribute\\n  ///  if there are unfinalized epochs so all possible rewards are distributed.\\n  function finalizeEpochs() external;\\n}\\n\",\"keccak256\":\"0xc71dbf8b53eec26104bbb324314ad87173f89ac79b7324066e7ec1fbe11f21f7\",\"license\":\"MIT\"},\"contracts/interfaces/IMembershipDirector.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.8.16;\\n\\ninterface IMembershipDirector {\\n  /**\\n   * @notice Notify that the owner has deposited some assets, which\\n   *  may affect membership.\\n   * @param owner address that performed the depositing\\n   * @return id of membership position\\n   */\\n  function consumeDeposit(address owner) external returns (uint256);\\n\\n  /**\\n   * @notice Notify that the owner has withdrawn some assets, which\\n   *  may affect membership.\\n   * @param owner address that performed the withdrawing\\n   * @return id of membership position\\n   */\\n  function consumeWithdraw(address owner) external returns (uint256);\\n\\n  /**\\n   * @notice Collect all membership yield enhancements for the caller.\\n   * @param owner address to claim rewards for\\n   * @return amount of yield enhancements collected\\n   */\\n  function collectRewards(address owner) external returns (uint256);\\n\\n  /**\\n   * @notice Check how many rewards are claimable for the caller. The return\\n   *  value here is how much would be retrieved by calling `collectRewards`.\\n   * @param owner address to calculate claimable rewards for\\n   * @return the amount of rewards that could be claimed by the caller\\n   */\\n  function claimableRewards(address owner) external view returns (uint256);\\n\\n  /**\\n   * @notice Calculate the membership score\\n   * @param gfi Amount of gfi\\n   * @param capital Amount of capital in USDC\\n   * @return membership score\\n   */\\n  function calculateMembershipScore(uint256 gfi, uint256 capital) external view returns (uint256);\\n\\n  /**\\n   * @notice Get the current score of `owner`\\n   * @param owner address to check the score of\\n   * @return eligibleScore score that is currently eligible for rewards\\n   * @return totalScore score that will be elgible for rewards next epoch\\n   */\\n  function currentScore(address owner) external view returns (uint256 eligibleScore, uint256 totalScore);\\n\\n  /**\\n   * @notice Get the sum of all member scores that are currently eligible and that will be eligible next epoch\\n   * @return eligibleTotal sum of all member scores that are currently eligible\\n   * @return nextEpochTotal sum of all member scores that will be eligible next epoch\\n   */\\n  function totalMemberScores() external view returns (uint256 eligibleTotal, uint256 nextEpochTotal);\\n\\n  /**\\n   * @notice Estimate the score for an existing member, given some changes in GFI and capital\\n   * @param memberAddress the member's address\\n   * @param gfi the change in gfi holdings, denominated in GFI\\n   * @param capital the change in gfi holdings, denominated in USDC\\n   * @return score resulting score for the member given the GFI and capital changes\\n   */\\n  function estimateMemberScore(\\n    address memberAddress,\\n    int256 gfi,\\n    int256 capital\\n  ) external view returns (uint256 score);\\n}\\n\",\"keccak256\":\"0x75e9c386eac38141996efaf3ce0c7be3abf36c26f3618d66c6479cc9e613c686\",\"license\":\"MIT\"},\"contracts/interfaces/IMembershipLedger.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.8.16;\\n\\ninterface IMembershipLedger {\\n  /**\\n   * @notice Set `addr`s allocated rewards back to 0\\n   * @param addr address to reset rewards on\\n   */\\n  function resetRewards(address addr) external;\\n\\n  /**\\n   * @notice Allocate `amount` rewards for `addr` but do not send them\\n   * @param addr address to distribute rewards to\\n   * @param amount amount of rewards to allocate for `addr`\\n   * @return rewards total allocated to `addr`\\n   */\\n  function allocateRewardsTo(address addr, uint256 amount) external returns (uint256 rewards);\\n\\n  /**\\n   * @notice Get the rewards allocated to a certain `addr`\\n   * @param addr the address to check pending rewards for\\n   * @return rewards pending rewards for `addr`\\n   */\\n  function getPendingRewardsFor(address addr) external view returns (uint256 rewards);\\n\\n  /**\\n   * @notice Get the alpha parameter for the cobb douglas function. Will always be in (0,1).\\n   * @return numerator numerator for the alpha param\\n   * @return denominator denominator for the alpha param\\n   */\\n  function alpha() external view returns (uint128 numerator, uint128 denominator);\\n}\\n\",\"keccak256\":\"0x82b72e4d64d277d31ef2bb5a776d028524917ced3dc3a0e6b9d283ecbb8637bd\",\"license\":\"MIT\"},\"contracts/interfaces/IMembershipOrchestrator.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.8.16;\\n\\nimport {Context} from \\\"../cake/Context.sol\\\";\\n\\nstruct CapitalDeposit {\\n  /// Address of the asset being deposited\\n  /// @dev must be supported in CapitalAssets.sol\\n  address assetAddress;\\n  /// Id of the nft\\n  uint256 id;\\n}\\n\\nstruct Deposit {\\n  /// Amount of gfi to deposit\\n  uint256 gfi;\\n  /// List of capital deposits\\n  CapitalDeposit[] capitalDeposits;\\n}\\n\\nstruct ERC20Withdrawal {\\n  uint256 id;\\n  uint256 amount;\\n}\\n\\nstruct Withdrawal {\\n  /// List of gfi token ids to withdraw\\n  ERC20Withdrawal[] gfiPositions;\\n  /// List of capital token ids to withdraw\\n  uint256[] capitalPositions;\\n}\\n\\n/**\\n * @title MembershipOrchestrator\\n * @notice Externally facing gateway to all Goldfinch membership functionality.\\n * @author Goldfinch\\n */\\ninterface IMembershipOrchestrator {\\n  /**\\n   * @notice Deposit GFI into membership rewards. The caller must have approved this\\n   *  contract to move GFI on their behalf.\\n   * @param amount the amount of GFI to move into membership\\n   * @return id of the newly created membership GFI position\\n   */\\n  function depositGFI(uint256 amount) external returns (uint256);\\n\\n  /**\\n   * @notice Deposit the ERC721 asset into membership rewards. The caller must have approved this\\n   *  contract to move the ERC721 asset on their behalf.\\n   * @param assetAddress the contract address of the ERC721 asset\\n   * @param id the id of the ERC721 asset to move into membership\\n   * @return id of the newly created membership capital position\\n   */\\n  function depositCapitalERC721(address assetAddress, uint256 id) external returns (uint256);\\n\\n  /**\\n   * @notice Deposit multiple assets defined in `multiDeposit`. Assets can include GFI, Staked Fidu,\\n   *  and others.\\n   * @param deposit struct describing all the assets to deposit\\n   * @return ids all of the ids of the created depoits, in the same order as deposit. If GFI is\\n   *  present, it will be the first id.\\n   */\\n  function deposit(Deposit calldata deposit) external returns (uint256[] memory ids);\\n\\n  /**\\n   * @notice Withdraw membership GFI position `id`\\n   * @param id id of the membership GFI position\\n   * @return how much GFI was withdrawn\\n   */\\n  function withdrawGFI(uint256 id) external returns (uint256);\\n\\n  /**\\n   * @notice Withdraw membership capital position `id`.\\n   * @param id id of the membership capital position\\n   */\\n  function withdrawCapital(uint256 id) external;\\n\\n  /**\\n   * @notice Withdraw multiple assets defined in `multiWithdraw`. Assets can be GFI or capital\\n   *  positions ids. Caller must have been permitted to act upon all of the positions.\\n   * @param withdrawal all of the GFI and Capital ids to withdraw\\n   */\\n  function withdraw(Withdrawal calldata withdrawal) external;\\n\\n  /**\\n   * @notice Withdraw all assets owned by `addr`. Caller must be allowed to act on\\n   *  behalf of `addr`.\\n   * @param addr address that has a position in membership\\n   */\\n  function withdrawAll(address addr) external;\\n\\n  /**\\n   * @notice Collect all membership rewards for the caller.\\n   * @param addr the address to collect rewards for\\n   * @return how many rewards were collected and sent to caller\\n   */\\n  function collectRewards(address addr) external returns (uint256);\\n\\n  /**\\n   * @notice Check how many rewards are claimable at this moment in time for caller.\\n   * @param addr the address to check claimable rewards for\\n   * @return how many rewards could be claimed by a call to `collectRewards`\\n   */\\n  function claimableRewards(address addr) external view returns (uint256);\\n\\n  /**\\n   * @notice Check the voting power of a given address\\n   * @param addr the address to check the voting power of\\n   * @return the voting power\\n   */\\n  function votingPower(address addr) external view returns (uint256);\\n\\n  /**\\n   * @notice Get all GFI in Membership held by `addr`. This returns the current eligible amount and the\\n   *  total amount of GFI.\\n   * @param addr the owner\\n   * @return eligibleAmount how much GFI is currently eligible for rewards\\n   * @return totalAmount how much GFI is currently eligible for rewards\\n   */\\n  function totalGFIHeldBy(address addr) external view returns (uint256 eligibleAmount, uint256 totalAmount);\\n\\n  /**\\n   * @notice Get all capital, denominated in USDC, in Membership held by `addr`. This returns the current\\n   *  eligible amount and the total USDC value of capital.\\n   * @param addr the owner\\n   * @return eligibleAmount how much USDC of capital is currently eligible for rewards\\n   * @return totalAmount how much  USDC of capital is currently eligible for rewards\\n   */\\n  function totalCapitalHeldBy(address addr) external view returns (uint256 eligibleAmount, uint256 totalAmount);\\n\\n  /**\\n   * @notice Get the member score of `addr`\\n   * @param addr the owner\\n   * @return eligibleScore the currently eligible score\\n   * @return totalScore the total score that will be eligible next epoch\\n   *\\n   * @dev if eligibleScore == totalScore then there are no changes between now and the next epoch\\n   */\\n  function memberScoreOf(address addr) external view returns (uint256 eligibleScore, uint256 totalScore);\\n\\n  /**\\n   * @notice Estimate rewards for a given epoch. For epochs at or before lastFinalizedEpoch\\n   *  this will be the fixed, accurate reward for the epoch. For the current and other\\n   *  non-finalized epochs, this will be the value as if the epoch were finalized in that\\n   *  moment.\\n   * @param epoch epoch to estimate the rewards of\\n   * @return rewards associated with `epoch`\\n   */\\n  function estimateRewardsFor(uint256 epoch) external view returns (uint256);\\n\\n  /**\\n   * @notice Calculate what the Membership Score would be if a `gfi` amount of GFI and `capital` amount\\n   *  of Capital denominated in USDC were deposited.\\n   * @param gfi amount of GFI to estimate with\\n   * @param capital amount of capital to estimate with, denominated in USDC\\n   * @return score the resulting score\\n   */\\n  function calculateMemberScore(uint256 gfi, uint256 capital) external view returns (uint256 score);\\n\\n  /**\\n   * @notice Get the sum of all member scores that are currently eligible and that will be eligible next epoch\\n   * @return eligibleTotal sum of all member scores that are currently eligible\\n   * @return nextEpochTotal sum of all member scores that will be eligible next epoch\\n   */\\n  function totalMemberScores() external view returns (uint256 eligibleTotal, uint256 nextEpochTotal);\\n\\n  /**\\n   * @notice Estimate the score for an existing member, given some changes in GFI and capital\\n   * @param memberAddress the member's address\\n   * @param gfi the change in gfi holdings, denominated in GFI\\n   * @param capital the change in gfi holdings, denominated in USDC\\n   * @return score resulting score for the member given the GFI and capital changes\\n   */\\n  function estimateMemberScore(\\n    address memberAddress,\\n    int256 gfi,\\n    int256 capital\\n  ) external view returns (uint256 score);\\n}\\n\",\"keccak256\":\"0x69ddad331d0a46f784f71e9064232c9808c9a3463c99e74149d59dff8bc8eb88\",\"license\":\"MIT\"},\"contracts/interfaces/IMembershipVault.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity >=0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC721Upgradeable.sol\\\";\\n\\n/// Struct generated when checkpointing a position. This reflects the position's\\n/// value changes since the last checkpoint.\\nstruct PreviousCheckpoint {\\n  /// Value ending the last checkpoint's epoch\\n  uint256 eligibleAmount;\\n  /// Value for all epochs after the last checkpoint's epoch, until the current one\\n  uint256 nextAmount;\\n  /// The last checkpoint's epoch\\n  uint256 checkpointEpoch;\\n}\\n\\nstruct Position {\\n  // address owning the position\\n  address owner;\\n  // how much of the position is eligible as of checkpointEpoch\\n  uint256 eligibleAmount;\\n  // how much of the postion is eligible the epoch after checkpointEpoch\\n  uint256 nextEpochAmount;\\n  // when the position was first created\\n  uint256 createdTimestamp;\\n  // epoch of the last checkpoint\\n  uint256 checkpointEpoch;\\n}\\n\\n/**\\n * @title IMembershipVault\\n * @notice Track assets held by owners in a vault, as well as the total held in the vault. Assets\\n *  are not accounted for until the next epoch for MEV protection.\\n * @author Goldfinch\\n */\\ninterface IMembershipVault is IERC721Upgradeable {\\n  /**\\n   * @notice Emitted when an owner has increased their holdings in a vault\\n   * @param owner the owner increasing their holdings\\n   * @param amount the amount increased to\\n   */\\n  event IncreasedHoldings(address indexed owner, uint256 amount);\\n\\n  /**\\n   * @notice Emitted when an owner has decreased their holdings in a vault\\n   * @param owner the owner decreasing their holdings\\n   * @param eligibleAmount new current amount\\n   * @param nextEpochAmount new next epoch amount\\n   */\\n  event DecreasedHoldings(address indexed owner, uint256 eligibleAmount, uint256 nextEpochAmount);\\n\\n  /**\\n   * @notice Emitted when the total within the vault has changed\\n   * @param eligibleAmount new current amount\\n   * @param nextEpochAmount new next epoch amount\\n   */\\n  event VaultTotalUpdate(uint256 eligibleAmount, uint256 nextEpochAmount);\\n\\n  /**\\n   * @notice Get the current value of `owner`. This changes depending on the current\\n   *  block.timestamp as increased holdings are not accounted for until the subsequent epoch.\\n   * @param owner address owning the positions\\n   * @return sum of all positions held by an address\\n   */\\n  function currentValueOwnedBy(address owner) external view returns (uint256);\\n\\n  /**\\n   * @notice Get the total value in the vault as of block.timestamp\\n   * @return total value in the vault as of block.timestamp\\n   */\\n  function currentTotal() external view returns (uint256);\\n\\n  /**\\n   * @notice Get the total value in the vault as of epoch\\n   * @return total value in the vault as of epoch\\n   */\\n  function totalAtEpoch(uint256 epoch) external view returns (uint256);\\n\\n  /**\\n   * @notice Get the position owned by `owner`\\n   * @return position owned by `owner`\\n   */\\n  function positionOwnedBy(address owner) external view returns (Position memory);\\n\\n  /**\\n   * @notice Record an increase in holdings. This takes effect in the vault the next epoch. `nextAmount`\\n   *  must be greater than what is currently recorded in the vault.\\n   * @param owner the owner to checkpoint\\n   * @param nextEpochAmount the new next amount (becomes the current amount next epoch)\\n   * @return id of the position\\n   */\\n  function increaseHoldings(address owner, uint256 nextEpochAmount) external returns (uint256);\\n\\n  /**\\n   * @notice Record a decrease in holdings. `currentAmount` and `nextAmount` must be equal\\n   *  to or less than what is currently recorded in the vault.\\n   * @param owner the owner to checkpoint\\n   * @param eligibleAmount the new current amount\\n   * @param nextEpochAmount the new next amount (becomes the current amount next epoch)\\n   * @return id of the position\\n   */\\n  function decreaseHoldings(\\n    address owner,\\n    uint256 eligibleAmount,\\n    uint256 nextEpochAmount\\n  ) external returns (uint256);\\n\\n  /**\\n   * @notice Checkpoint a specific owner & the vault total\\n   * @param owner the owner to checkpoint\\n   * @return previousCheckpoint data about how the position mutated during checkpointing\\n   *\\n   * @dev to collect rewards, this must be called before `increaseHoldings` or\\n   *  `decreaseHoldings`. Those functions must call checkpoint internally\\n   *  so the historical data will be lost otherwise.\\n   */\\n  function checkpoint(address owner) external returns (PreviousCheckpoint memory previousCheckpoint);\\n}\\n\",\"keccak256\":\"0x5fa22d0d15fd76b555f9cf10b44941419d8b2300e6459a25fda3921f48fd1ac4\",\"license\":\"MIT\"},\"contracts/interfaces/IPoolTokens.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\npragma experimental ABIEncoderV2;\\n\\nimport \\\"./openzeppelin/IERC721.sol\\\";\\n\\ninterface IPoolTokens is IERC721 {\\n  event TokenMinted(\\n    address indexed owner,\\n    address indexed pool,\\n    uint256 indexed tokenId,\\n    uint256 amount,\\n    uint256 tranche\\n  );\\n\\n  event TokenRedeemed(\\n    address indexed owner,\\n    address indexed pool,\\n    uint256 indexed tokenId,\\n    uint256 principalRedeemed,\\n    uint256 interestRedeemed,\\n    uint256 tranche\\n  );\\n  event TokenBurned(address indexed owner, address indexed pool, uint256 indexed tokenId);\\n\\n  struct TokenInfo {\\n    address pool;\\n    uint256 tranche;\\n    uint256 principalAmount;\\n    uint256 principalRedeemed;\\n    uint256 interestRedeemed;\\n  }\\n\\n  struct MintParams {\\n    uint256 principalAmount;\\n    uint256 tranche;\\n  }\\n\\n  function mint(MintParams calldata params, address to) external returns (uint256);\\n\\n  function redeem(\\n    uint256 tokenId,\\n    uint256 principalRedeemed,\\n    uint256 interestRedeemed\\n  ) external;\\n\\n  function withdrawPrincipal(uint256 tokenId, uint256 principalAmount) external;\\n\\n  function burn(uint256 tokenId) external;\\n\\n  function onPoolCreated(address newPool) external;\\n\\n  function getTokenInfo(uint256 tokenId) external view returns (TokenInfo memory);\\n\\n  function validPool(address sender) external view returns (bool);\\n\\n  function isApprovedOrOwner(address spender, uint256 tokenId) external view returns (bool);\\n}\\n\",\"keccak256\":\"0x9569823f1e5647f6a627035a341dee918ef58f8b1faefa2a9fd47e75c1f1420f\",\"license\":\"MIT\"},\"contracts/interfaces/ISeniorPool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\npragma experimental ABIEncoderV2;\\n\\nimport \\\"./ITranchedPool.sol\\\";\\n\\nabstract contract ISeniorPool {\\n  uint256 public sharePrice;\\n  uint256 public totalLoansOutstanding;\\n  uint256 public totalWritedowns;\\n\\n  function deposit(uint256 amount) external virtual returns (uint256 depositShares);\\n\\n  function depositWithPermit(\\n    uint256 amount,\\n    uint256 deadline,\\n    uint8 v,\\n    bytes32 r,\\n    bytes32 s\\n  ) external virtual returns (uint256 depositShares);\\n\\n  function withdraw(uint256 usdcAmount) external virtual returns (uint256 amount);\\n\\n  function withdrawInFidu(uint256 fiduAmount) external virtual returns (uint256 amount);\\n\\n  function sweepToCompound() public virtual;\\n\\n  function sweepFromCompound() public virtual;\\n\\n  function invest(ITranchedPool pool) public virtual;\\n\\n  function estimateInvestment(ITranchedPool pool) public view virtual returns (uint256);\\n\\n  function redeem(uint256 tokenId) public virtual;\\n\\n  function writedown(uint256 tokenId) public virtual;\\n\\n  function calculateWritedown(uint256 tokenId) public view virtual returns (uint256 writedownAmount);\\n\\n  function assets() public view virtual returns (uint256);\\n\\n  function getNumShares(uint256 amount) public view virtual returns (uint256);\\n}\\n\",\"keccak256\":\"0x529b3e34b03c6400e6cd8da7683b6d0daf1c8694dbbff889bd05f1a0b5923e9b\",\"license\":\"MIT\"},\"contracts/interfaces/IStakingRewards.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\npragma solidity >=0.6.12;\\n\\npragma experimental ABIEncoderV2;\\n\\nimport {IERC721} from \\\"./openzeppelin/IERC721.sol\\\";\\nimport {IERC721Metadata} from \\\"./openzeppelin/IERC721Metadata.sol\\\";\\nimport {IERC721Enumerable} from \\\"./openzeppelin/IERC721Enumerable.sol\\\";\\n\\ninterface IStakingRewards is IERC721, IERC721Metadata, IERC721Enumerable {\\n  function getPosition(uint256 tokenId) external view returns (StakedPosition memory position);\\n\\n  function unstake(uint256 tokenId, uint256 amount) external;\\n\\n  function addToStake(uint256 tokenId, uint256 amount) external;\\n\\n  function stakedBalanceOf(uint256 tokenId) external view returns (uint256);\\n\\n  function depositToCurveAndStakeFrom(\\n    address nftRecipient,\\n    uint256 fiduAmount,\\n    uint256 usdcAmount\\n  ) external;\\n\\n  function kick(uint256 tokenId) external;\\n\\n  function accumulatedRewardsPerToken() external view returns (uint256);\\n\\n  function lastUpdateTime() external view returns (uint256);\\n\\n  /* ========== EVENTS ========== */\\n\\n  event RewardAdded(uint256 reward);\\n  event Staked(\\n    address indexed user,\\n    uint256 indexed tokenId,\\n    uint256 amount,\\n    StakedPositionType positionType,\\n    uint256 baseTokenExchangeRate\\n  );\\n  event DepositedAndStaked(address indexed user, uint256 depositedAmount, uint256 indexed tokenId, uint256 amount);\\n  event DepositedToCurve(address indexed user, uint256 fiduAmount, uint256 usdcAmount, uint256 tokensReceived);\\n  event DepositedToCurveAndStaked(\\n    address indexed user,\\n    uint256 fiduAmount,\\n    uint256 usdcAmount,\\n    uint256 indexed tokenId,\\n    uint256 amount\\n  );\\n  event Unstaked(address indexed user, uint256 indexed tokenId, uint256 amount, StakedPositionType positionType);\\n  event UnstakedMultiple(address indexed user, uint256[] tokenIds, uint256[] amounts);\\n  event UnstakedAndWithdrew(address indexed user, uint256 usdcReceivedAmount, uint256 indexed tokenId, uint256 amount);\\n  event UnstakedAndWithdrewMultiple(\\n    address indexed user,\\n    uint256 usdcReceivedAmount,\\n    uint256[] tokenIds,\\n    uint256[] amounts\\n  );\\n  event RewardPaid(address indexed user, uint256 indexed tokenId, uint256 reward);\\n  event RewardsParametersUpdated(\\n    address indexed who,\\n    uint256 targetCapacity,\\n    uint256 minRate,\\n    uint256 maxRate,\\n    uint256 minRateAtPercent,\\n    uint256 maxRateAtPercent\\n  );\\n  event EffectiveMultiplierUpdated(address indexed who, StakedPositionType positionType, uint256 multiplier);\\n}\\n\\n/// @notice Indicates which ERC20 is staked\\nenum StakedPositionType {\\n  Fidu,\\n  CurveLP\\n}\\n\\nstruct Rewards {\\n  uint256 totalUnvested;\\n  uint256 totalVested;\\n  // @dev DEPRECATED (definition kept for storage slot)\\n  //   For legacy vesting positions, this was used in the case of slashing.\\n  //   For non-vesting positions, this is unused.\\n  uint256 totalPreviouslyVested;\\n  uint256 totalClaimed;\\n  uint256 startTime;\\n  // @dev DEPRECATED (definition kept for storage slot)\\n  //   For legacy vesting positions, this is the endTime of the vesting.\\n  //   For non-vesting positions, this is 0.\\n  uint256 endTime;\\n}\\n\\nstruct StakedPosition {\\n  // @notice Staked amount denominated in `stakingToken().decimals()`\\n  uint256 amount;\\n  // @notice Struct describing rewards owed with vesting\\n  Rewards rewards;\\n  // @notice Multiplier applied to staked amount when locking up position\\n  uint256 leverageMultiplier;\\n  // @notice Time in seconds after which position can be unstaked\\n  uint256 lockedUntil;\\n  // @notice Type of the staked position\\n  StakedPositionType positionType;\\n  // @notice Multiplier applied to staked amount to denominate in `baseStakingToken().decimals()`\\n  // @dev This field should not be used directly; it may be 0 for staked positions created prior to GIP-1.\\n  //  If you need this field, use `safeEffectiveMultiplier()`, which correctly handles old staked positions.\\n  uint256 unsafeEffectiveMultiplier;\\n  // @notice Exchange rate applied to staked amount to denominate in `baseStakingToken().decimals()`\\n  // @dev This field should not be used directly; it may be 0 for staked positions created prior to GIP-1.\\n  //  If you need this field, use `safeBaseTokenExchangeRate()`, which correctly handles old staked positions.\\n  uint256 unsafeBaseTokenExchangeRate;\\n}\\n\",\"keccak256\":\"0xb001875f3e7a6414f8e72cf25afdd30cd949fd2b0a219a4778b8027ef1d26667\",\"license\":\"MIT\"},\"contracts/interfaces/ITranchedPool.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\npragma experimental ABIEncoderV2;\\n\\nimport {IV2CreditLine} from \\\"./IV2CreditLine.sol\\\";\\n\\nabstract contract ITranchedPool {\\n  IV2CreditLine public creditLine;\\n  uint256 public createdAt;\\n  enum Tranches {\\n    Reserved,\\n    Senior,\\n    Junior\\n  }\\n\\n  struct TrancheInfo {\\n    uint256 id;\\n    uint256 principalDeposited;\\n    uint256 principalSharePrice;\\n    uint256 interestSharePrice;\\n    uint256 lockedUntil;\\n  }\\n\\n  struct PoolSlice {\\n    TrancheInfo seniorTranche;\\n    TrancheInfo juniorTranche;\\n    uint256 totalInterestAccrued;\\n    uint256 principalDeployed;\\n  }\\n\\n  function initialize(\\n    address _config,\\n    address _borrower,\\n    uint256 _juniorFeePercent,\\n    uint256 _limit,\\n    uint256 _interestApr,\\n    uint256 _paymentPeriodInDays,\\n    uint256 _termInDays,\\n    uint256 _lateFeeApr,\\n    uint256 _principalGracePeriodInDays,\\n    uint256 _fundableAt,\\n    uint256[] calldata _allowedUIDTypes\\n  ) public virtual;\\n\\n  function getTranche(uint256 tranche) external view virtual returns (TrancheInfo memory);\\n\\n  function pay(uint256 amount) external virtual;\\n\\n  function poolSlices(uint256 index) external view virtual returns (PoolSlice memory);\\n\\n  function lockJuniorCapital() external virtual;\\n\\n  function lockPool() external virtual;\\n\\n  function initializeNextSlice(uint256 _fundableAt) external virtual;\\n\\n  function totalJuniorDeposits() external view virtual returns (uint256);\\n\\n  function drawdown(uint256 amount) external virtual;\\n\\n  function setFundableAt(uint256 timestamp) external virtual;\\n\\n  function deposit(uint256 tranche, uint256 amount) external virtual returns (uint256 tokenId);\\n\\n  function assess() external virtual;\\n\\n  function depositWithPermit(\\n    uint256 tranche,\\n    uint256 amount,\\n    uint256 deadline,\\n    uint8 v,\\n    bytes32 r,\\n    bytes32 s\\n  ) external virtual returns (uint256 tokenId);\\n\\n  function availableToWithdraw(uint256 tokenId)\\n    external\\n    view\\n    virtual\\n    returns (uint256 interestRedeemable, uint256 principalRedeemable);\\n\\n  function withdraw(uint256 tokenId, uint256 amount)\\n    external\\n    virtual\\n    returns (uint256 interestWithdrawn, uint256 principalWithdrawn);\\n\\n  function withdrawMax(uint256 tokenId)\\n    external\\n    virtual\\n    returns (uint256 interestWithdrawn, uint256 principalWithdrawn);\\n\\n  function withdrawMultiple(uint256[] calldata tokenIds, uint256[] calldata amounts) external virtual;\\n\\n  function numSlices() external view virtual returns (uint256);\\n}\\n\",\"keccak256\":\"0x7a21d304a7ba635f4a074488d152c62c6b8b442cc5a5ad85a454621f4baec659\",\"license\":\"MIT\"},\"contracts/interfaces/IV2CreditLine.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity >=0.6.12;\\npragma experimental ABIEncoderV2;\\n\\nimport \\\"./ICreditLine.sol\\\";\\n\\nabstract contract IV2CreditLine is ICreditLine {\\n  function principal() external view virtual returns (uint256);\\n\\n  function totalInterestAccrued() external view virtual returns (uint256);\\n\\n  function termStartTime() external view virtual returns (uint256);\\n\\n  function setLimit(uint256 newAmount) external virtual;\\n\\n  function setMaxLimit(uint256 newAmount) external virtual;\\n\\n  function setBalance(uint256 newBalance) external virtual;\\n\\n  function setPrincipal(uint256 _principal) external virtual;\\n\\n  function setTotalInterestAccrued(uint256 _interestAccrued) external virtual;\\n\\n  function drawdown(uint256 amount) external virtual;\\n\\n  function assess()\\n    external\\n    virtual\\n    returns (\\n      uint256,\\n      uint256,\\n      uint256\\n    );\\n\\n  function initialize(\\n    address _config,\\n    address owner,\\n    address _borrower,\\n    uint256 _limit,\\n    uint256 _interestApr,\\n    uint256 _paymentPeriodInDays,\\n    uint256 _termInDays,\\n    uint256 _lateFeeApr,\\n    uint256 _principalGracePeriodInDays\\n  ) public virtual;\\n\\n  function setTermEndTime(uint256 newTermEndTime) external virtual;\\n\\n  function setNextDueTime(uint256 newNextDueTime) external virtual;\\n\\n  function setInterestOwed(uint256 newInterestOwed) external virtual;\\n\\n  function setPrincipalOwed(uint256 newPrincipalOwed) external virtual;\\n\\n  function setInterestAccruedAsOf(uint256 newInterestAccruedAsOf) external virtual;\\n\\n  function setWritedownAmount(uint256 newWritedownAmount) external virtual;\\n\\n  function setLastFullPaymentTime(uint256 newLastFullPaymentTime) external virtual;\\n\\n  function setLateFeeApr(uint256 newLateFeeApr) external virtual;\\n}\\n\",\"keccak256\":\"0xc72be7462ade69ec2d4bb18344cfe1c8b4659bd68314cef013aa5616bfe8f607\",\"license\":\"MIT\"},\"contracts/interfaces/openzeppelin/IERC165.sol\":{\"content\":\"pragma solidity >=0.6.0;\\n\\n// This file copied from OZ, but with the version pragma updated to use >=.\\n\\n/**\\n * @dev Interface of the ERC165 standard, as defined in the\\n * https://eips.ethereum.org/EIPS/eip-165[EIP].\\n *\\n * Implementers can declare support of contract interfaces, which can then be\\n * queried by others ({ERC165Checker}).\\n *\\n * For an implementation, see {ERC165}.\\n */\\ninterface IERC165 {\\n  /**\\n   * @dev Returns true if this contract implements the interface defined by\\n   * `interfaceId`. See the corresponding\\n   * https://eips.ethereum.org/EIPS/eip-165#how-interfaces-are-identified[EIP section]\\n   * to learn more about how these ids are created.\\n   *\\n   * This function call must use less than 30 000 gas.\\n   */\\n  function supportsInterface(bytes4 interfaceId) external view returns (bool);\\n}\\n\",\"keccak256\":\"0xbbdb8f6dfaecd47a0d65bee707877d6974a0e0da6c02403ad5ce00590bd97497\"},\"contracts/interfaces/openzeppelin/IERC721.sol\":{\"content\":\"pragma solidity >=0.6.2;\\n\\n// This file copied from OZ, but with the version pragma updated to use >= & reference other >= pragma interfaces.\\n// NOTE: Modified to reference our updated pragma version of IERC165\\nimport \\\"./IERC165.sol\\\";\\n\\n/**\\n * @dev Required interface of an ERC721 compliant contract.\\n */\\ninterface IERC721 is IERC165 {\\n  event Transfer(address indexed from, address indexed to, uint256 indexed tokenId);\\n  event Approval(address indexed owner, address indexed approved, uint256 indexed tokenId);\\n  event ApprovalForAll(address indexed owner, address indexed operator, bool approved);\\n\\n  /**\\n   * @dev Returns the number of NFTs in ``owner``'s account.\\n   */\\n  function balanceOf(address owner) external view returns (uint256 balance);\\n\\n  /**\\n   * @dev Returns the owner of the NFT specified by `tokenId`.\\n   */\\n  function ownerOf(uint256 tokenId) external view returns (address owner);\\n\\n  /**\\n   * @dev Transfers a specific NFT (`tokenId`) from one account (`from`) to\\n   * another (`to`).\\n   *\\n   *\\n   *\\n   * Requirements:\\n   * - `from`, `to` cannot be zero.\\n   * - `tokenId` must be owned by `from`.\\n   * - If the caller is not `from`, it must be have been allowed to move this\\n   * NFT by either {approve} or {setApprovalForAll}.\\n   */\\n  function safeTransferFrom(\\n    address from,\\n    address to,\\n    uint256 tokenId\\n  ) external;\\n\\n  /**\\n   * @dev Transfers a specific NFT (`tokenId`) from one account (`from`) to\\n   * another (`to`).\\n   *\\n   * Requirements:\\n   * - If the caller is not `from`, it must be approved to move this NFT by\\n   * either {approve} or {setApprovalForAll}.\\n   */\\n  function transferFrom(\\n    address from,\\n    address to,\\n    uint256 tokenId\\n  ) external;\\n\\n  function approve(address to, uint256 tokenId) external;\\n\\n  function getApproved(uint256 tokenId) external view returns (address operator);\\n\\n  function setApprovalForAll(address operator, bool _approved) external;\\n\\n  function isApprovedForAll(address owner, address operator) external view returns (bool);\\n\\n  function safeTransferFrom(\\n    address from,\\n    address to,\\n    uint256 tokenId,\\n    bytes calldata data\\n  ) external;\\n}\\n\",\"keccak256\":\"0x2527635bd6ab0d348f5f7d325ef2241a544586bb85dd806053adf1cc409293e5\"},\"contracts/interfaces/openzeppelin/IERC721Enumerable.sol\":{\"content\":\"pragma solidity >=0.6.2;\\n\\n// This file copied from OZ, but with the version pragma updated to use >=.\\n\\nimport \\\"./IERC721.sol\\\";\\n\\n/**\\n * @title ERC-721 Non-Fungible Token Standard, optional enumeration extension\\n * @dev See https://eips.ethereum.org/EIPS/eip-721\\n */\\ninterface IERC721Enumerable is IERC721 {\\n  function totalSupply() external view returns (uint256);\\n\\n  function tokenOfOwnerByIndex(address owner, uint256 index) external view returns (uint256 tokenId);\\n\\n  function tokenByIndex(uint256 index) external view returns (uint256);\\n}\\n\",\"keccak256\":\"0x7fd709ba4093899fc4593cb1413132e127773a349a8aef9ce234d62fa36b5fca\"},\"contracts/interfaces/openzeppelin/IERC721Metadata.sol\":{\"content\":\"pragma solidity >=0.6.2;\\n\\n// This file copied from OZ, but with the version pragma updated to use >=.\\n\\nimport \\\"./IERC721.sol\\\";\\n\\n/**\\n * @title ERC-721 Non-Fungible Token Standard, optional metadata extension\\n * @dev See https://eips.ethereum.org/EIPS/eip-721\\n */\\ninterface IERC721Metadata is IERC721 {\\n  function name() external view returns (string memory);\\n\\n  function symbol() external view returns (string memory);\\n\\n  function tokenURI(uint256 tokenId) external view returns (string memory);\\n}\\n\",\"keccak256\":\"0x56c56c47d03d0ea452a13842ad2e3e5b81b3689c484efd35a48f3977e9b929d8\"},\"contracts/library/FiduConversions.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.16;\\n\\nlibrary FiduConversions {\\n  uint256 internal constant FIDU_MANTISSA = 1e18;\\n  uint256 internal constant USDC_MANTISSA = 1e6;\\n  uint256 internal constant USDC_TO_FIDU_MANTISSA = FIDU_MANTISSA / USDC_MANTISSA;\\n  uint256 internal constant FIDU_USDC_CONVERSION_DECIMALS = USDC_TO_FIDU_MANTISSA * FIDU_MANTISSA;\\n\\n  /**\\n   * @notice Convert Usdc to Fidu using a given share price\\n   * @param usdcAmount amount of usdc to convert\\n   * @param sharePrice share price to use to convert\\n   * @return fiduAmount converted fidu amount\\n   */\\n  function usdcToFidu(uint256 usdcAmount, uint256 sharePrice) internal pure returns (uint256) {\\n    return sharePrice > 0 ? (usdcAmount * FIDU_USDC_CONVERSION_DECIMALS) / sharePrice : 0;\\n  }\\n\\n  /**\\n   * @notice Convert fidu to USDC using a given share price\\n   * @param fiduAmount fidu amount to convert\\n   * @param sharePrice share price to do the conversion with\\n   * @return usdcReceived usdc that will be received after converting\\n   */\\n  function fiduToUsdc(uint256 fiduAmount, uint256 sharePrice) internal pure returns (uint256) {\\n    return (fiduAmount * sharePrice) / FIDU_USDC_CONVERSION_DECIMALS;\\n  }\\n}\\n\",\"keccak256\":\"0x1210040e7e0011209d38b1f779f60401eb815a9311f9117c73e9b85cae797134\",\"license\":\"MIT\"},\"contracts/protocol/core/membership/Epochs.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.16;\\n\\nlibrary Epochs {\\n  uint256 internal constant EPOCH_SECONDS = 7 days;\\n\\n  /**\\n   * @notice Get the Unix timestamp of the start of `epoch`\\n   * @param epoch the epoch\\n   * @return unix timestamp\\n   */\\n  function toSeconds(uint256 epoch) internal pure returns (uint256) {\\n    return epoch * EPOCH_SECONDS;\\n  }\\n\\n  /**\\n   * @notice Get the epoch containing the timestamp `s`\\n   * @param s the timestamp\\n   * @return corresponding epoch\\n   */\\n  function fromSeconds(uint256 s) internal pure returns (uint256) {\\n    return s / EPOCH_SECONDS;\\n  }\\n\\n  /**\\n   * @notice Get the current epoch for the block.timestamp\\n   * @return current epoch\\n   */\\n  function current() internal view returns (uint256) {\\n    return fromSeconds(block.timestamp);\\n  }\\n\\n  /**\\n   * @notice Get the start timestamp for the current epoch\\n   * @return current epoch start timestamp\\n   */\\n  function currentEpochStartTimestamp() internal view returns (uint256) {\\n    return toSeconds(current());\\n  }\\n\\n  /**\\n   * @notice Get the previous epoch given block.timestamp\\n   * @return previous epoch\\n   */\\n  function previous() internal view returns (uint256) {\\n    return current() - 1;\\n  }\\n\\n  /**\\n   * @notice Get the next epoch given block.timestamp\\n   * @return next epoch\\n   */\\n  function next() internal view returns (uint256) {\\n    return current() + 1;\\n  }\\n\\n  /**\\n   * @notice How many seconds to the next epoch.\\n   * @return seconds remaining in the current epoch\\n   */\\n  function secondsToNextEpoch() internal view returns (uint256) {\\n    return toSeconds(next()) - block.timestamp;\\n  }\\n}\\n\",\"keccak256\":\"0x9cedc417b6ca6c1f20ffd74ed79ece1c783ef950b90bbeb370e7a2ea0ed7a727\",\"license\":\"MIT\"},\"contracts/protocol/core/membership/MembershipDirector.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/proxy/utils/Initializable.sol\\\";\\nimport {MathUpgradeable as Math} from \\\"@openzeppelin/contracts-upgradeable/utils/math/MathUpgradeable.sol\\\";\\n\\nimport \\\"../../../interfaces/IMembershipDirector.sol\\\";\\n\\nimport {IMembershipVault, Position, PreviousCheckpoint} from \\\"../../../interfaces/IMembershipVault.sol\\\";\\nimport {MembershipScores} from \\\"./MembershipScores.sol\\\";\\nimport {Base} from \\\"../../../cake/Base.sol\\\";\\nimport {Context} from \\\"../../../cake/Context.sol\\\";\\nimport \\\"../../../cake/Routing.sol\\\" as Routing;\\nimport {CapitalAssets} from \\\"./assets/CapitalAssets.sol\\\";\\nimport {Epochs} from \\\"./Epochs.sol\\\";\\n\\nusing Routing.Context for Context;\\n\\ncontract MembershipDirector is IMembershipDirector, Base, Initializable {\\n  error InvalidVaultPosition();\\n  error InvalidPositionType();\\n\\n  /// @notice Emitted when `owner` claims fidu `rewards`\\n  /// @param owner the owner claiming rewards\\n  /// @param rewards amount of fidu claimed\\n  event RewardsClaimed(address indexed owner, uint256 rewards);\\n\\n  constructor(Context _context) Base(_context) {}\\n\\n  /// @inheritdoc IMembershipDirector\\n  function consumeDeposit(address owner) external onlyOperator returns (uint256) {\\n    _allocateRewards(owner);\\n\\n    (, uint256 totalGFI) = context.gfiLedger().totalsOf(owner);\\n    (, uint256 totalCapital) = context.capitalLedger().totalsOf(owner);\\n\\n    return\\n      context.membershipVault().increaseHoldings({\\n        owner: owner,\\n        nextEpochAmount: calculateMembershipScore({gfi: totalGFI, capital: totalCapital})\\n      });\\n  }\\n\\n  /// @inheritdoc IMembershipDirector\\n  function consumeWithdraw(address owner) external onlyOperator returns (uint256) {\\n    _allocateRewards(owner);\\n\\n    (uint256 eligibleGFI, uint256 totalGFI) = context.gfiLedger().totalsOf(owner);\\n    (uint256 eligibleCapital, uint256 totalCapital) = context.capitalLedger().totalsOf(owner);\\n\\n    return\\n      context.membershipVault().decreaseHoldings({\\n        owner: owner,\\n        eligibleAmount: calculateMembershipScore({gfi: eligibleGFI, capital: eligibleCapital}),\\n        nextEpochAmount: calculateMembershipScore({gfi: totalGFI, capital: totalCapital})\\n      });\\n  }\\n\\n  /// @inheritdoc IMembershipDirector\\n  function collectRewards(address owner) external onlyOperator returns (uint256 rewards) {\\n    rewards = _allocateRewards(owner);\\n\\n    context.membershipLedger().resetRewards(owner);\\n\\n    context.membershipCollector().distributeFiduTo(owner, rewards);\\n\\n    emit RewardsClaimed(owner, rewards);\\n  }\\n\\n  /// @inheritdoc IMembershipDirector\\n  function claimableRewards(address owner) public view returns (uint256) {\\n    uint256 allocatedRewards = context.membershipLedger().getPendingRewardsFor(owner);\\n\\n    Position memory position = context.membershipVault().positionOwnedBy(owner);\\n    uint256 rewardsToLastFinalizedEpoch = _calculateRewards(\\n      position.checkpointEpoch,\\n      position.eligibleAmount,\\n      position.nextEpochAmount\\n    );\\n\\n    /// @dev if an epoch has passed, but is not finalized, those rewards are not counted\\n    ///  although they would be claimed if collectRewards were called.\\n\\n    return allocatedRewards + rewardsToLastFinalizedEpoch;\\n  }\\n\\n  /// @inheritdoc IMembershipDirector\\n  function currentScore(address owner) public view returns (uint256 eligibleScore, uint256 totalScore) {\\n    Position memory position = context.membershipVault().positionOwnedBy(owner);\\n    return (position.eligibleAmount, position.nextEpochAmount);\\n  }\\n\\n  /// @inheritdoc IMembershipDirector\\n  function calculateMembershipScore(uint256 gfi, uint256 capital) public view returns (uint256) {\\n    (uint256 alphaNumerator, uint256 alphaDenominator) = context.membershipLedger().alpha();\\n\\n    return\\n      MembershipScores.calculateScore({\\n        gfi: gfi,\\n        capital: capital,\\n        alphaNumerator: alphaNumerator,\\n        alphaDenominator: alphaDenominator\\n      });\\n  }\\n\\n  /// @inheritdoc IMembershipDirector\\n  function totalMemberScores() external view returns (uint256 eligibleTotal, uint256 nextEpochTotal) {\\n    return (\\n      context.membershipVault().totalAtEpoch(Epochs.current()),\\n      context.membershipVault().totalAtEpoch(Epochs.next())\\n    );\\n  }\\n\\n  /// @inheritdoc IMembershipDirector\\n  function estimateMemberScore(\\n    address memberAddress,\\n    int256 gfi,\\n    int256 capital\\n  ) external view returns (uint256 score) {\\n    (uint256 alphaNumerator, uint256 alphaDenominator) = context.membershipLedger().alpha();\\n\\n    (, uint256 totalGFI) = context.gfiLedger().totalsOf(memberAddress);\\n    (, uint256 totalCapital) = context.capitalLedger().totalsOf(memberAddress);\\n\\n    uint256 resultingGFI = totalGFI;\\n    if (gfi < 0) resultingGFI -= uint256(-gfi);\\n    else resultingGFI += uint256(gfi);\\n\\n    uint256 resultingCapital = totalCapital;\\n    if (capital < 0) resultingCapital -= uint256(-capital);\\n    else resultingCapital += uint256(capital);\\n\\n    return\\n      MembershipScores.calculateScore({\\n        gfi: resultingGFI,\\n        capital: resultingCapital,\\n        alphaNumerator: alphaNumerator,\\n        alphaDenominator: alphaDenominator\\n      });\\n  }\\n\\n  //////////////////////////////////////////////////////////////////\\n  // Private\\n\\n  function _allocateRewards(address owner) private returns (uint256) {\\n    if (context.membershipCollector().lastFinalizedEpoch() < Epochs.current() - 1) {\\n      // Guarantee that lastFinalizedEpoch is always up to date when distributing rewards\\n      // Without this, we will never distribute rewards for an epoch that has already\\n      // passed but is not finalized: the vault's checkpoint will update to epochs.current()\\n      // so we will never attempt the missing epoch epoch again.\\n\\n      context.membershipCollector().finalizeEpochs();\\n    }\\n\\n    PreviousCheckpoint memory checkpoint = context.membershipVault().checkpoint(owner);\\n\\n    uint256 rewards = _calculateRewards(checkpoint.checkpointEpoch, checkpoint.eligibleAmount, checkpoint.nextAmount);\\n\\n    return context.membershipLedger().allocateRewardsTo(owner, rewards);\\n  }\\n\\n  function _calculateRewards(\\n    uint256 startEpoch,\\n    uint256 eligibleMemberScore,\\n    uint256 nextEpochMemberScore\\n  ) private view returns (uint256 rewards) {\\n    if (eligibleMemberScore > 0) {\\n      if (startEpoch < Epochs.current()) {\\n        rewards += _shareOfEpochRewards(startEpoch, eligibleMemberScore);\\n      }\\n    }\\n\\n    if (nextEpochMemberScore > 0) {\\n      for (uint256 epoch = startEpoch + 1; epoch < Epochs.current(); epoch++) {\\n        rewards += _shareOfEpochRewards(epoch, nextEpochMemberScore);\\n      }\\n    }\\n  }\\n\\n  function _shareOfEpochRewards(uint256 epoch, uint256 memberScore) private view returns (uint256) {\\n    uint256 totalMemberScores = context.membershipVault().totalAtEpoch(epoch);\\n    uint256 rewardTotal = context.membershipCollector().rewardsForEpoch(epoch);\\n\\n    if (memberScore > totalMemberScores) revert InvalidVaultPosition();\\n    if (totalMemberScores == 0) return 0;\\n\\n    return (memberScore * rewardTotal) / totalMemberScores;\\n  }\\n}\\n\",\"keccak256\":\"0xd42ac6061b6830414892eb2cbe4c4e6a738fe47fe3b91ce59a5324951ced9f07\",\"license\":\"MIT\"},\"contracts/protocol/core/membership/MembershipFixedMath.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n// solhint-disable var-name-mixedcase\\n\\npragma solidity ^0.8.16;\\n\\nlibrary MembershipFixedMath {\\n  /// Thrown when the natural log function is given too large of an argument\\n  error LnTooLarge(int256 x);\\n  /// Thrown when the natural log would have returned a number outside of \\u211d\\n  error LnNonRealResult(int256 x);\\n  /// Thrown when exp is given too large of an argument\\n  error ExpTooLarge(int256 x);\\n\\n  // Base for the fixed point numbers (this is our 1)\\n  int256 private constant FIXED_1 = int256(0x0000000000000000000000000000000080000000000000000000000000000000);\\n  // Maximum ln argument (1)\\n  int256 private constant LN_MAX_VAL = FIXED_1;\\n  // Minimum ln argument. Notice this is related to EXP_MIN_VAL (e ^ -63.875)\\n  int256 private constant LN_MIN_VAL = int256(0x0000000000000000000000000000000000000000000000000000000733048c5a);\\n  // Maximum exp argument (0)\\n  int256 private constant EXP_MAX_VAL = 0;\\n  // Minimum exp argument. Notice this is related to LN_MIN_VAL (-63.875)\\n  int256 private constant EXP_MIN_VAL = -int256(0x0000000000000000000000000000001ff0000000000000000000000000000000);\\n\\n  /**\\n   * @notice Convert some uint256 fraction `n` numerator / `d` denominator to a fixed-point number `f`.\\n   * @param n numerator\\n   * @param d denominator\\n   * @return fixed-point number\\n   */\\n  function toFixed(uint256 n, uint256 d) internal pure returns (int256) {\\n    return (int256(n) * FIXED_1) / int256(d);\\n  }\\n\\n  /**\\n   * @notice Divide some unsigned int `u` by a fixed point number `f`\\n   * @param u unsigned dividend\\n   * @param f fixed point divisor, in FIXED_1 units\\n   * @return unsigned int quotient\\n   */\\n  function uintDiv(uint256 u, int256 f) internal pure returns (uint256) {\\n    // multiply `u` by FIXED_1 to cancel out the built-in FIXED_1 in f\\n    return uint256((int256(u) * FIXED_1) / f);\\n  }\\n\\n  /**\\n   * @notice Multiply some unsigned int `u` by a fixed point number `f`\\n   * @param u unsigned multiplicand\\n   * @param f fixed point multiplier, in FIXED_1 units\\n   * @return unsigned int product\\n   */\\n  function uintMul(uint256 u, int256 f) internal pure returns (uint256) {\\n    // divide the product by FIXED_1 to cancel out the built-in FIXED_1 in f\\n    return uint256((int256(u) * f) / FIXED_1);\\n  }\\n\\n  //////////////////////////////////////////////////////////////////\\n  // solhint-disable max-line-length\\n  //\\n  // Below is code from 0x's LibFixedMath.sol. Only changes are addition\\n  // of the 0.8-style errors.\\n  // https://github.com/0xProject/exchange-v3/blob/aae46bef841bfd1cc31028f41793db4fe7197084/contracts/staking/contracts/src/libs/LibFixedMath.sol\\n\\n  /*\\n\\n  Copyright 2017 Bprotocol Foundation, 2019 ZeroEx Intl.\\n\\n  Licensed under the Apache License, Version 2.0 (the \\\"License\\\");\\n  you may not use this file except in compliance with the License.\\n  You may obtain a copy of the License at\\n\\n    http://www.apache.org/licenses/LICENSE-2.0\\n\\n  Unless required by applicable law or agreed to in writing, software\\n  distributed under the License is distributed on an \\\"AS IS\\\" BASIS,\\n  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\\n  See the License for the specific language governing permissions and\\n  limitations under the License.\\n\\n  */\\n\\n  /// @dev Get the natural logarithm of a fixed-point number 0 < `x` <= LN_MAX_VAL\\n  function ln(int256 x) internal pure returns (int256 r) {\\n    if (x > LN_MAX_VAL) {\\n      revert LnTooLarge(x);\\n    }\\n    if (x <= 0) {\\n      revert LnNonRealResult(x);\\n    }\\n    if (x == FIXED_1) {\\n      return 0;\\n    }\\n    if (x <= LN_MIN_VAL) {\\n      return EXP_MIN_VAL;\\n    }\\n\\n    int256 y;\\n    int256 z;\\n    int256 w;\\n\\n    // Rewrite the input as a quotient of negative natural exponents and a single residual q, such that 1 < q < 2\\n    // For example: log(0.3) = log(e^-1 * e^-0.25 * 1.0471028872385522)\\n    //              = 1 - 0.25 - log(1 + 0.0471028872385522)\\n    // e ^ -32\\n    if (x <= int256(0x00000000000000000000000000000000000000000001c8464f76164760000000)) {\\n      r -= int256(0x0000000000000000000000000000001000000000000000000000000000000000); // - 32\\n      x = (x * FIXED_1) / int256(0x00000000000000000000000000000000000000000001c8464f76164760000000); // / e ^ -32\\n    }\\n    // e ^ -16\\n    if (x <= int256(0x00000000000000000000000000000000000000f1aaddd7742e90000000000000)) {\\n      r -= int256(0x0000000000000000000000000000000800000000000000000000000000000000); // - 16\\n      x = (x * FIXED_1) / int256(0x00000000000000000000000000000000000000f1aaddd7742e90000000000000); // / e ^ -16\\n    }\\n    // e ^ -8\\n    if (x <= int256(0x00000000000000000000000000000000000afe10820813d78000000000000000)) {\\n      r -= int256(0x0000000000000000000000000000000400000000000000000000000000000000); // - 8\\n      x = (x * FIXED_1) / int256(0x00000000000000000000000000000000000afe10820813d78000000000000000); // / e ^ -8\\n    }\\n    // e ^ -4\\n    if (x <= int256(0x0000000000000000000000000000000002582ab704279ec00000000000000000)) {\\n      r -= int256(0x0000000000000000000000000000000200000000000000000000000000000000); // - 4\\n      x = (x * FIXED_1) / int256(0x0000000000000000000000000000000002582ab704279ec00000000000000000); // / e ^ -4\\n    }\\n    // e ^ -2\\n    if (x <= int256(0x000000000000000000000000000000001152aaa3bf81cc000000000000000000)) {\\n      r -= int256(0x0000000000000000000000000000000100000000000000000000000000000000); // - 2\\n      x = (x * FIXED_1) / int256(0x000000000000000000000000000000001152aaa3bf81cc000000000000000000); // / e ^ -2\\n    }\\n    // e ^ -1\\n    if (x <= int256(0x000000000000000000000000000000002f16ac6c59de70000000000000000000)) {\\n      r -= int256(0x0000000000000000000000000000000080000000000000000000000000000000); // - 1\\n      x = (x * FIXED_1) / int256(0x000000000000000000000000000000002f16ac6c59de70000000000000000000); // / e ^ -1\\n    }\\n    // e ^ -0.5\\n    if (x <= int256(0x000000000000000000000000000000004da2cbf1be5828000000000000000000)) {\\n      r -= int256(0x0000000000000000000000000000000040000000000000000000000000000000); // - 0.5\\n      x = (x * FIXED_1) / int256(0x000000000000000000000000000000004da2cbf1be5828000000000000000000); // / e ^ -0.5\\n    }\\n    // e ^ -0.25\\n    if (x <= int256(0x0000000000000000000000000000000063afbe7ab2082c000000000000000000)) {\\n      r -= int256(0x0000000000000000000000000000000020000000000000000000000000000000); // - 0.25\\n      x = (x * FIXED_1) / int256(0x0000000000000000000000000000000063afbe7ab2082c000000000000000000); // / e ^ -0.25\\n    }\\n    // e ^ -0.125\\n    if (x <= int256(0x0000000000000000000000000000000070f5a893b608861e1f58934f97aea57d)) {\\n      r -= int256(0x0000000000000000000000000000000010000000000000000000000000000000); // - 0.125\\n      x = (x * FIXED_1) / int256(0x0000000000000000000000000000000070f5a893b608861e1f58934f97aea57d); // / e ^ -0.125\\n    }\\n    // `x` is now our residual in the range of 1 <= x <= 2 (or close enough).\\n\\n    // Add the taylor series for log(1 + z), where z = x - 1\\n    z = y = x - FIXED_1;\\n    w = (y * y) / FIXED_1;\\n    r += (z * (0x100000000000000000000000000000000 - y)) / 0x100000000000000000000000000000000;\\n    z = (z * w) / FIXED_1; // add y^01 / 01 - y^02 / 02\\n    r += (z * (0x0aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa - y)) / 0x200000000000000000000000000000000;\\n    z = (z * w) / FIXED_1; // add y^03 / 03 - y^04 / 04\\n    r += (z * (0x099999999999999999999999999999999 - y)) / 0x300000000000000000000000000000000;\\n    z = (z * w) / FIXED_1; // add y^05 / 05 - y^06 / 06\\n    r += (z * (0x092492492492492492492492492492492 - y)) / 0x400000000000000000000000000000000;\\n    z = (z * w) / FIXED_1; // add y^07 / 07 - y^08 / 08\\n    r += (z * (0x08e38e38e38e38e38e38e38e38e38e38e - y)) / 0x500000000000000000000000000000000;\\n    z = (z * w) / FIXED_1; // add y^09 / 09 - y^10 / 10\\n    r += (z * (0x08ba2e8ba2e8ba2e8ba2e8ba2e8ba2e8b - y)) / 0x600000000000000000000000000000000;\\n    z = (z * w) / FIXED_1; // add y^11 / 11 - y^12 / 12\\n    r += (z * (0x089d89d89d89d89d89d89d89d89d89d89 - y)) / 0x700000000000000000000000000000000;\\n    z = (z * w) / FIXED_1; // add y^13 / 13 - y^14 / 14\\n    r += (z * (0x088888888888888888888888888888888 - y)) / 0x800000000000000000000000000000000; // add y^15 / 15 - y^16 / 16\\n  }\\n\\n  /// @dev Compute the natural exponent for a fixed-point number EXP_MIN_VAL <= `x` <= 1\\n  function exp(int256 x) internal pure returns (int256 r) {\\n    if (x < EXP_MIN_VAL) {\\n      // Saturate to zero below EXP_MIN_VAL.\\n      return 0;\\n    }\\n    if (x == 0) {\\n      return FIXED_1;\\n    }\\n    if (x > EXP_MAX_VAL) {\\n      revert ExpTooLarge(x);\\n    }\\n\\n    // Rewrite the input as a product of natural exponents and a\\n    // single residual q, where q is a number of small magnitude.\\n    // For example: e^-34.419 = e^(-32 - 2 - 0.25 - 0.125 - 0.044)\\n    //              = e^-32 * e^-2 * e^-0.25 * e^-0.125 * e^-0.044\\n    //              -> q = -0.044\\n\\n    // Multiply with the taylor series for e^q\\n    int256 y;\\n    int256 z;\\n    // q = x % 0.125 (the residual)\\n    z = y = x % 0x0000000000000000000000000000000010000000000000000000000000000000;\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x10e1b3be415a0000; // add y^02 * (20! / 02!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x05a0913f6b1e0000; // add y^03 * (20! / 03!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x0168244fdac78000; // add y^04 * (20! / 04!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x004807432bc18000; // add y^05 * (20! / 05!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x000c0135dca04000; // add y^06 * (20! / 06!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x0001b707b1cdc000; // add y^07 * (20! / 07!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x000036e0f639b800; // add y^08 * (20! / 08!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x00000618fee9f800; // add y^09 * (20! / 09!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x0000009c197dcc00; // add y^10 * (20! / 10!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x0000000e30dce400; // add y^11 * (20! / 11!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x000000012ebd1300; // add y^12 * (20! / 12!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x0000000017499f00; // add y^13 * (20! / 13!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x0000000001a9d480; // add y^14 * (20! / 14!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x00000000001c6380; // add y^15 * (20! / 15!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x000000000001c638; // add y^16 * (20! / 16!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x0000000000001ab8; // add y^17 * (20! / 17!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x000000000000017c; // add y^18 * (20! / 18!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x0000000000000014; // add y^19 * (20! / 19!)\\n    z = (z * y) / FIXED_1;\\n    r += z * 0x0000000000000001; // add y^20 * (20! / 20!)\\n    r = r / 0x21c3677c82b40000 + y + FIXED_1; // divide by 20! and then add y^1 / 1! + y^0 / 0!\\n\\n    // Multiply with the non-residual terms.\\n    x = -x;\\n    // e ^ -32\\n    if ((x & int256(0x0000000000000000000000000000001000000000000000000000000000000000)) != 0) {\\n      r =\\n        (r * int256(0x00000000000000000000000000000000000000f1aaddd7742e56d32fb9f99744)) /\\n        int256(0x0000000000000000000000000043cbaf42a000812488fc5c220ad7b97bf6e99e); // * e ^ -32\\n    }\\n    // e ^ -16\\n    if ((x & int256(0x0000000000000000000000000000000800000000000000000000000000000000)) != 0) {\\n      r =\\n        (r * int256(0x00000000000000000000000000000000000afe10820813d65dfe6a33c07f738f)) /\\n        int256(0x000000000000000000000000000005d27a9f51c31b7c2f8038212a0574779991); // * e ^ -16\\n    }\\n    // e ^ -8\\n    if ((x & int256(0x0000000000000000000000000000000400000000000000000000000000000000)) != 0) {\\n      r =\\n        (r * int256(0x0000000000000000000000000000000002582ab704279e8efd15e0265855c47a)) /\\n        int256(0x0000000000000000000000000000001b4c902e273a58678d6d3bfdb93db96d02); // * e ^ -8\\n    }\\n    // e ^ -4\\n    if ((x & int256(0x0000000000000000000000000000000200000000000000000000000000000000)) != 0) {\\n      r =\\n        (r * int256(0x000000000000000000000000000000001152aaa3bf81cb9fdb76eae12d029571)) /\\n        int256(0x00000000000000000000000000000003b1cc971a9bb5b9867477440d6d157750); // * e ^ -4\\n    }\\n    // e ^ -2\\n    if ((x & int256(0x0000000000000000000000000000000100000000000000000000000000000000)) != 0) {\\n      r =\\n        (r * int256(0x000000000000000000000000000000002f16ac6c59de6f8d5d6f63c1482a7c86)) /\\n        int256(0x000000000000000000000000000000015bf0a8b1457695355fb8ac404e7a79e3); // * e ^ -2\\n    }\\n    // e ^ -1\\n    if ((x & int256(0x0000000000000000000000000000000080000000000000000000000000000000)) != 0) {\\n      r =\\n        (r * int256(0x000000000000000000000000000000004da2cbf1be5827f9eb3ad1aa9866ebb3)) /\\n        int256(0x00000000000000000000000000000000d3094c70f034de4b96ff7d5b6f99fcd8); // * e ^ -1\\n    }\\n    // e ^ -0.5\\n    if ((x & int256(0x0000000000000000000000000000000040000000000000000000000000000000)) != 0) {\\n      r =\\n        (r * int256(0x0000000000000000000000000000000063afbe7ab2082ba1a0ae5e4eb1b479dc)) /\\n        int256(0x00000000000000000000000000000000a45af1e1f40c333b3de1db4dd55f29a7); // * e ^ -0.5\\n    }\\n    // e ^ -0.25\\n    if ((x & int256(0x0000000000000000000000000000000020000000000000000000000000000000)) != 0) {\\n      r =\\n        (r * int256(0x0000000000000000000000000000000070f5a893b608861e1f58934f97aea57d)) /\\n        int256(0x00000000000000000000000000000000910b022db7ae67ce76b441c27035c6a1); // * e ^ -0.25\\n    }\\n    // e ^ -0.125\\n    if ((x & int256(0x0000000000000000000000000000000010000000000000000000000000000000)) != 0) {\\n      r =\\n        (r * int256(0x00000000000000000000000000000000783eafef1c0a8f3978c7f81824d62ebf)) /\\n        int256(0x0000000000000000000000000000000088415abbe9a76bead8d00cf112e4d4a8); // * e ^ -0.125\\n    }\\n  }\\n}\\n\",\"keccak256\":\"0xcb736645672ef82d9c56fedf314f38991f808b2319dc2ad88f865c9bca676993\",\"license\":\"MIT\"},\"contracts/protocol/core/membership/MembershipScores.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.16;\\n\\nimport \\\"./MembershipFixedMath.sol\\\";\\n\\nlibrary MembershipScores {\\n  uint256 internal constant GFI_MANTISSA = 1e18;\\n  uint256 internal constant USDC_MANTISSA = 1e6;\\n  uint256 internal constant USDC_TO_GFI_MANTISSA = GFI_MANTISSA / USDC_MANTISSA;\\n\\n  /**\\n   * @notice Calculate a membership score given some amount of `gfi` and `capital`, along\\n   *  with some \\ud835\\udf70 = `alphaNumerator` / `alphaDenominator`.\\n   * @param gfi amount of gfi (GFI, 1e18 decimal places)\\n   * @param capital amount of capital (USDC, 1e6 decimal places)\\n   * @param alphaNumerator alpha param numerator\\n   * @param alphaDenominator alpha param denominator\\n   * @return membership score with 1e18 decimal places\\n   *\\n   * @dev \\ud835\\udf70 must be in the range [0, 1]\\n   */\\n  function calculateScore(\\n    uint256 gfi,\\n    uint256 capital,\\n    uint256 alphaNumerator,\\n    uint256 alphaDenominator\\n  ) internal pure returns (uint256) {\\n    // Convert capital to the same base units as GFI\\n    capital = capital * USDC_TO_GFI_MANTISSA;\\n\\n    // Score function is:\\n    // gfi^\\ud835\\udf70 * capital^(1-\\ud835\\udf70)\\n    //    = capital * capital^(-\\ud835\\udf70) * gfi^\\ud835\\udf70\\n    //    = capital * (gfi / capital)^\\ud835\\udf70\\n    //    = capital * (e ^ (ln(gfi / capital))) ^ \\ud835\\udf70\\n    //    = capital * e ^ (\\ud835\\udf70 * ln(gfi / capital))     (1)\\n    // or\\n    //    = capital / ( 1 / e ^ (\\ud835\\udf70 * ln(gfi / capital)))\\n    //    = capital / (e ^ (\\ud835\\udf70 * ln(gfi / capital)) ^ -1)\\n    //    = capital / e ^ (\\ud835\\udf70 * -1 * ln(gfi / capital))\\n    //    = capital / e ^ (\\ud835\\udf70 * ln(capital / gfi))     (2)\\n    //\\n    // To avoid overflows, use (1) when gfi < capital and\\n    // use (2) when capital < gfi\\n\\n    assert(alphaNumerator <= alphaDenominator);\\n\\n    // If any side is 0, exit early\\n    if (gfi == 0 || capital == 0) return 0;\\n\\n    // If both sides are equal, we have:\\n    // gfi^\\ud835\\udf70 * capital^(1-\\ud835\\udf70)\\n    //    = gfi^\\ud835\\udf70 * gfi^(1-\\ud835\\udf70)\\n    //    = gfi^(\\ud835\\udf70 + 1 - \\ud835\\udf70)     = gfi\\n    if (gfi == capital) return gfi;\\n\\n    bool lessGFIThanCapital = gfi < capital;\\n\\n    // (gfi / capital) or (capital / gfi), always in range (0, 1)\\n    int256 ratio = lessGFIThanCapital\\n      ? MembershipFixedMath.toFixed(gfi, capital)\\n      : MembershipFixedMath.toFixed(capital, gfi);\\n\\n    // e ^ ( ln(ratio) * \\ud835\\udf70 )\\n    int256 exponentiation = MembershipFixedMath.exp(\\n      (MembershipFixedMath.ln(ratio) * int256(alphaNumerator)) / int256(alphaDenominator)\\n    );\\n\\n    if (lessGFIThanCapital) {\\n      // capital * e ^ (\\ud835\\udf70 * ln(gfi / capital))\\n      return MembershipFixedMath.uintMul(capital, exponentiation);\\n    }\\n\\n    // capital / e ^ (\\ud835\\udf70 * ln(capital / gfi))\\n    return MembershipFixedMath.uintDiv(capital, exponentiation);\\n  }\\n}\\n\",\"keccak256\":\"0xd1894dae586e4238deabab94750f125eb0ff38eb26cfac44bf5bdd9d586cc6bb\",\"license\":\"MIT\"},\"contracts/protocol/core/membership/assets/CapitalAssets.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity 0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC20Upgradeable.sol\\\";\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC721Upgradeable.sol\\\";\\n\\nimport {Context} from \\\"../../../../cake/Context.sol\\\";\\nimport {CapitalAssetType} from \\\"../../../../interfaces/ICapitalLedger.sol\\\";\\nimport \\\"../../../../cake/Routing.sol\\\" as Routing;\\n\\n/// @dev Adding a New Asset Type\\n/// 1. Create a new library in this directory of the name <AssetType>Asset.sol\\n/// 2. The library must implement the same functions as the other assets:\\n///   2.1 AssetType\\n///   2.2 isType\\n///   2.3 isValid - if the asset is an ERC721\\n///   2.4 getUsdcEquivalent\\n/// 3. Import the library below in \\\"Supported assets\\\"\\n/// 4. Add the new library to the corresponding `getSupportedType` function in this file\\n/// 5. Add the new library to the corresponding `getUsdcEquivalent` function in this file\\n/// 6. If the new library is an ERC721, add it to the `isValid` function in this file\\n\\n// Supported assets\\nimport {PoolTokensAsset} from \\\"./PoolTokensAsset.sol\\\";\\nimport {StakedFiduAsset} from \\\"./StakedFiduAsset.sol\\\";\\n\\nusing Routing.Context for Context;\\n\\nlibrary CapitalAssets {\\n  /// Thrown when an asset has been requested that does not exist\\n  error InvalidAsset(address assetAddress);\\n  /// Thrown when an asset has been requested that does not exist\\n  error InvalidAssetWithId(address assetAddress, uint256 assetTokenId);\\n\\n  /**\\n   * @notice Check if a specific `assetAddress` has a corresponding capital asset\\n   *  implementation and returns the asset type. Returns INVALID if no\\n   *  such asset exists.\\n   * @param context goldfinch context for routing\\n   * @param assetAddress the address of the asset's contract\\n   * @return type of the asset\\n   */\\n  function getSupportedType(Context context, address assetAddress) internal view returns (CapitalAssetType) {\\n    if (StakedFiduAsset.isType(context, assetAddress)) return StakedFiduAsset.AssetType;\\n    if (PoolTokensAsset.isType(context, assetAddress)) return PoolTokensAsset.AssetType;\\n\\n    return CapitalAssetType.INVALID;\\n  }\\n\\n  //////////////////////////////////////////////////////////////////\\n  // ERC721\\n\\n  /**\\n   * @notice Check if a specific token for a supported asset is valid or not. Returns false\\n   *  if the asset is not supported or the token is invalid\\n   * @param context goldfinch context for routing\\n   * @param assetAddress the address of the asset's contract\\n   * @param assetTokenId the token id\\n   * @return whether or not a specific token id of asset address is supported\\n   */\\n  function isValid(\\n    Context context,\\n    address assetAddress,\\n    uint256 assetTokenId\\n  ) internal view returns (bool) {\\n    if (StakedFiduAsset.isType(context, assetAddress)) return StakedFiduAsset.isValid(context, assetTokenId);\\n    if (PoolTokensAsset.isType(context, assetAddress)) return PoolTokensAsset.isValid(context, assetTokenId);\\n\\n    return false;\\n  }\\n\\n  /**\\n   * @notice Get the point-in-time USDC equivalent value of the ERC721 asset. This\\n   *  specifically attempts to return the \\\"principle\\\" or \\\"at-risk\\\" USDC value of\\n   *  the asset and does not include rewards, interest, or other benefits.\\n   * @param context goldfinch context for routing\\n   * @param asset ERC721 to evaluate\\n   * @param assetTokenId id of the token to evaluate\\n   * @return USDC equivalent value\\n   */\\n  function getUsdcEquivalent(\\n    Context context,\\n    IERC721Upgradeable asset,\\n    uint256 assetTokenId\\n  ) internal view returns (uint256) {\\n    if (PoolTokensAsset.isType(context, address(asset))) {\\n      return PoolTokensAsset.getUsdcEquivalent(context, assetTokenId);\\n    }\\n\\n    if (StakedFiduAsset.isType(context, address(asset))) {\\n      return StakedFiduAsset.getUsdcEquivalent(context, assetTokenId);\\n    }\\n\\n    revert InvalidAsset(address(asset));\\n  }\\n}\\n\",\"keccak256\":\"0x7c81ac6d3b36a44a8ae1f29867067e4d0844e5aa6e874b4901e3dc83b392dfc7\",\"license\":\"MIT\"},\"contracts/protocol/core/membership/assets/PoolTokensAsset.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity 0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC20Upgradeable.sol\\\";\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC721Upgradeable.sol\\\";\\n\\nimport {Context} from \\\"../../../../cake/Context.sol\\\";\\nimport \\\"../../../../cake/Routing.sol\\\" as Routing;\\n\\nimport {CapitalAssetType} from \\\"../../../../interfaces/ICapitalLedger.sol\\\";\\nimport {IPoolTokens} from \\\"../../../../interfaces/IPoolTokens.sol\\\";\\n\\nimport {ITranchedPool} from \\\"../../../../interfaces/ITranchedPool.sol\\\";\\n\\nusing Routing.Context for Context;\\n\\nlibrary PoolTokensAsset {\\n  CapitalAssetType public constant AssetType = CapitalAssetType.ERC721;\\n\\n  /**\\n   * @notice Get the type of asset that this contract adapts.\\n   * @return the asset type\\n   */\\n  function isType(Context context, address assetAddress) internal view returns (bool) {\\n    return assetAddress == address(context.poolTokens());\\n  }\\n\\n  /**\\n   * @notice Get whether or not the given asset is valid\\n   * @return true - all pool tokens are valid\\n   */\\n  function isValid(Context, uint256) internal pure returns (bool) {\\n    return true;\\n  }\\n\\n  /**\\n   * @notice Get the point-in-time USDC equivalent value of the Pool Token asset. This\\n   *  specifically attempts to return the \\\"principle\\\" or \\\"at-risk\\\" USDC value of\\n   *  the asset and does not include rewards, interest, or other benefits.\\n   * @param context goldfinch context for routing\\n   * @param assetTokenId tokenId of the Pool Token to evaluate\\n   * @return USDC equivalent value\\n   */\\n  function getUsdcEquivalent(Context context, uint256 assetTokenId) internal view returns (uint256) {\\n    IPoolTokens.TokenInfo memory tokenInfo = context.poolTokens().getTokenInfo(assetTokenId);\\n    return tokenInfo.principalAmount - tokenInfo.principalRedeemed;\\n  }\\n}\\n\",\"keccak256\":\"0x0ab8430c7ade07568bb60e7e16cf6b76e90890842c03c4b929606bcb830e701e\",\"license\":\"MIT\"},\"contracts/protocol/core/membership/assets/StakedFiduAsset.sol\":{\"content\":\"// SPDX-License-Identifier: MIT\\n\\npragma solidity ^0.8.16;\\n\\nimport \\\"@openzeppelin/contracts-upgradeable/interfaces/IERC20Upgradeable.sol\\\";\\nimport \\\"../../../../library/FiduConversions.sol\\\";\\nimport {Context} from \\\"../../../../cake/Context.sol\\\";\\nimport \\\"../../../../cake/Routing.sol\\\" as Routing;\\n\\nimport {CapitalAssetType} from \\\"../../../../interfaces/ICapitalLedger.sol\\\";\\nimport {IStakingRewards, StakedPositionType} from \\\"../../../../interfaces/IStakingRewards.sol\\\";\\nimport {ISeniorPool} from \\\"../../../../interfaces/ISeniorPool.sol\\\";\\n\\nusing Routing.Context for Context;\\n\\nlibrary StakedFiduAsset {\\n  CapitalAssetType public constant AssetType = CapitalAssetType.ERC721;\\n\\n  /**\\n   * @notice Get the type of asset that this contract adapts.\\n   * @return the asset type\\n   */\\n  function isType(Context context, address assetAddress) internal view returns (bool) {\\n    return assetAddress == address(context.stakingRewards());\\n  }\\n\\n  /**\\n   * @notice Get whether or not the given asset is valid\\n   * @return true if the asset is Fidu type (not CurveLP)\\n   */\\n  function isValid(Context context, uint256 assetTokenId) internal view returns (bool) {\\n    return context.stakingRewards().getPosition(assetTokenId).positionType == StakedPositionType.Fidu;\\n  }\\n\\n  /**\\n   * @notice Get the point-in-time USDC equivalent value of the ERC721 asset. This\\n   *  specifically attempts to return the \\\"principle\\\" or \\\"at-risk\\\" USDC value of\\n   *  the asset and does not include rewards, interest, or other benefits.\\n   * @param context goldfinch context for routing\\n   * @param assetTokenId id of the position to evaluate\\n   * @return USDC equivalent value\\n   */\\n  function getUsdcEquivalent(Context context, uint256 assetTokenId) internal view returns (uint256) {\\n    uint256 stakedFiduBalance = context.stakingRewards().stakedBalanceOf(assetTokenId);\\n    return FiduConversions.fiduToUsdc(stakedFiduBalance, context.seniorPool().sharePrice());\\n  }\\n}\\n\",\"keccak256\":\"0xb69dae93cf7dd9eb9bc89f30af5e4371a1a21943dd442d032fcd0ac61435103d\",\"license\":\"MIT\"}},\"version\":1}",
  "bytecode": "0x60a06040523480156200001157600080fd5b5060405162002b4738038062002b47833981016040819052620000349162000046565b6001600160a01b031660805262000078565b6000602082840312156200005957600080fd5b81516001600160a01b03811681146200007157600080fd5b9392505050565b608051612a04620001436000396000818161013c015281816101e601528181610288015281816103a901528181610444015281816104e6015281816105860152818161063d015281816106d70152818161076601528181610842015281816108e90152818161099d01528181610a5301528181610aef01528181610b9301528181610c3401528181610d0f01528181610dd101528181610e73015281816112ba01528181611353015281816113da01528181611497015281816123f6015261249a0152612a046000f3fe608060405234801561001057600080fd5b50600436106100785760003560e01c806317bc7d471461007d5780633d9d3f34146100a35780635763dbd0146100b657806377bb1411146100c95780638a440b00146100e6578063a265cbdf146100f9578063cc323aee1461010c578063dc01f60d1461011f575b600080fd5b61009061008b366004612598565b610132565b6040519081526020015b60405180910390f35b6100906100b13660046125cd565b6103a2565b6100906100c43660046125cd565b610636565b6100d161083a565b6040805192835260208301919091520161009a565b6100d16100f43660046125cd565b610993565b6100906101073660046125cd565b610a4c565b61009061011a3660046125ea565b610d05565b61009061012d3660046125cd565b610dc9565b60008060006101697f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610f3c565b6001600160a01b031663db1d0fd56040518163ffffffff1660e01b81526004016040805180830381865afa1580156101a5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101c99190612623565b6001600160801b031691506001600160801b0316915060006102137f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661100c565b6001600160a01b031663427d7432886040518263ffffffff1660e01b815260040161023e9190612656565b6040805180830381865afa15801561025a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061027e919061266a565b91505060006102b57f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661109e565b6001600160a01b031663427d7432896040518263ffffffff1660e01b81526004016102e09190612656565b6040805180830381865afa1580156102fc573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610320919061266a565b9150829050600088121561034857610337886126a4565b61034190826126c0565b9050610355565b61035288826126d3565b90505b81600088121561037957610368886126a4565b61037290826126c0565b9050610386565b61038388826126d3565b90505b61039282828888611131565b96505050505050505b9392505050565b60006103d67f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661120c565b6001600160a01b03166395e155c130336040518363ffffffff1660e01b81526004016104039291906126e6565b60006040518083038186803b15801561041b57600080fd5b505afa15801561042f573d6000803e3d6000fd5b5050505061043c8261129f565b5060006104717f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661100c565b6001600160a01b031663427d7432846040518263ffffffff1660e01b815260040161049c9190612656565b6040805180830381865afa1580156104b8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104dc919061266a565b91505060006105137f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661109e565b6001600160a01b031663427d7432856040518263ffffffff1660e01b815260040161053e9190612656565b6040805180830381865afa15801561055a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061057e919061266a565b9150506105b37f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b031663c47deec8856105cc8585610d05565b6040518363ffffffff1660e01b81526004016105e9929190612700565b6020604051808303816000875af1158015610608573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061062c9190612719565b925050505b919050565b600061066a7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661120c565b6001600160a01b03166395e155c130336040518363ffffffff1660e01b81526004016106979291906126e6565b60006040518083038186803b1580156106af57600080fd5b505afa1580156106c3573d6000803e3d6000fd5b505050506106d08261129f565b90506107047f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610f3c565b6001600160a01b0316635aa0c7f8836040518263ffffffff1660e01b815260040161072f9190612656565b600060405180830381600087803b15801561074957600080fd5b505af115801561075d573d6000803e3d6000fd5b505050506107937f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316611584565b6001600160a01b0316633f1689ea83836040518363ffffffff1660e01b81526004016107c0929190612700565b600060405180830381600087803b1580156107da57600080fd5b505af11580156107ee573d6000803e3d6000fd5b50505050816001600160a01b03167ffc30cddea38e2bf4d6ea7d3f9ed3b6ad7f176419f4963bd81318067a4aee73fe8260405161082d91815260200190565b60405180910390a2919050565b60008061086f7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b0316639017a13c610885611617565b6040518263ffffffff1660e01b81526004016108a391815260200190565b602060405180830381865afa1580156108c0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108e49190612719565b6109167f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b0316639017a13c61092c611627565b6040518263ffffffff1660e01b815260040161094a91815260200190565b602060405180830381865afa158015610967573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061098b9190612719565b915091509091565b60008060006109ca7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b031663a5f2f667856040518263ffffffff1660e01b81526004016109f59190612656565b60a060405180830381865afa158015610a12573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a369190612732565b9050806020015181604001519250925050915091565b6000610a807f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661120c565b6001600160a01b03166395e155c130336040518363ffffffff1660e01b8152600401610aad9291906126e6565b60006040518083038186803b158015610ac557600080fd5b505afa158015610ad9573d6000803e3d6000fd5b50505050610ae68261129f565b50600080610b1c7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661100c565b6001600160a01b031663427d7432856040518263ffffffff1660e01b8152600401610b479190612656565b6040805180830381865afa158015610b63573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b87919061266a565b91509150600080610bc07f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661109e565b6001600160a01b031663427d7432876040518263ffffffff1660e01b8152600401610beb9190612656565b6040805180830381865afa158015610c07573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c2b919061266a565b91509150610c617f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b031663199db43d87610c7a8786610d05565b610c848786610d05565b6040516001600160e01b031960e086901b1681526001600160a01b039093166004840152602483019190915260448201526064016020604051808303816000875af1158015610cd7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610cfb9190612719565b9695505050505050565b6000806000610d3c7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610f3c565b6001600160a01b031663db1d0fd56040518163ffffffff1660e01b81526004016040805180830381865afa158015610d78573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d9c9190612623565b6001600160801b031691506001600160801b03169150610dbe85858484611131565b925050505b92915050565b600080610dfe7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610f3c565b6001600160a01b031663cafd9ae2846040518263ffffffff1660e01b8152600401610e299190612656565b602060405180830381865afa158015610e46573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e6a9190612719565b90506000610ea07f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b031663a5f2f667856040518263ffffffff1660e01b8152600401610ecb9190612656565b60a060405180830381865afa158015610ee8573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f0c9190612732565b90506000610f2782608001518360200151846040015161163c565b9050610f3381846126d3565b95945050505050565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015610f7c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610fa091906127b9565b60405163ce10a0d360e01b8152600760048201526001600160a01b03919091169063ce10a0d3906024015b602060405180830381865afa158015610fe8573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dc391906127b9565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa15801561104c573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061107091906127b9565b60405163ce10a0d360e01b81526004818101526001600160a01b03919091169063ce10a0d390602401610fcb565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa1580156110de573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061110291906127b9565b60405163ce10a0d360e01b8152600360048201526001600160a01b03919091169063ce10a0d390602401610fcb565b6000611148620f4240670de0b6b3a76400006127ec565b6111529085612800565b9350818311156111645761116461281f565b84158061116f575083155b1561117c57506000611204565b83850361118a575083611204565b8385106000816111a35761119e86886116bf565b6111ad565b6111ad87876116bf565b905060006111d885876111bf856116da565b6111c99190612835565b6111d391906128ba565b611cbd565b905082156111f4576111ea87826123ce565b9350505050611204565b6111fe87826116bf565b93505050505b949350505050565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa15801561124c573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061127091906127b9565b60405163ce10a0d360e01b8152600160048201526001600160a01b03919091169063ce10a0d390602401610fcb565b600060016112ab611617565b6112b591906126c0565b6112e77f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316611584565b6001600160a01b031663c5a3f9076040518163ffffffff1660e01b8152600401602060405180830381865afa158015611324573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906113489190612719565b10156113d3576113807f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316611584565b6001600160a01b031663fe07bb076040518163ffffffff1660e01b8152600401600060405180830381600087803b1580156113ba57600080fd5b505af11580156113ce573d6000803e3d6000fd5b505050505b60006114077f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b031663a972985e846040518263ffffffff1660e01b81526004016114329190612656565b6060604051808303816000875af1158015611451573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061147591906128e8565b9050600061149082604001518360000151846020015161163c565b90506114c47f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610f3c565b6001600160a01b031663ab66f5fa85836040518363ffffffff1660e01b81526004016105e9929190612700565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015611531573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061155591906127b9565b60405163ce10a0d360e01b8152600260048201526001600160a01b03919091169063ce10a0d390602401610fcb565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa1580156115c4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115e891906127b9565b60405163ce10a0d360e01b8152600860048201526001600160a01b03919091169063ce10a0d390602401610fcb565b6000611622426123df565b905090565b6000611631611617565b6116229060016126d3565b6000821561166a5761164c611617565b84101561166a5761165d84846123ee565b61166790826126d3565b90505b811561039b57600061167d8560016126d3565b90505b611688611617565b8110156116b75761169981846123ee565b6116a390836126d3565b9150806116af81612952565b915050611680565b509392505050565b6000816116d06001607f1b85612835565b61039b91906128ba565b60006001607f1b82131561170957604051633ce23a3d60e11b8152600481018390526024015b60405180910390fd5b6000821361172d576040516330ecaa3d60e21b815260048101839052602401611700565b6001607f1b820361174057506000919050565b640733048c5a821361175a57610dc36101ff607c1b6126a4565b60008060006a01c8464f7616476000000085136117a85761177f600160841b8561296b565b93506a01c8464f7616476000000061179b6001607f1b87612835565b6117a591906128ba565b94505b660f1aaddd7742e960341b85136117ef576117c7600160831b8561296b565b9350660f1aaddd7742e960341b6117e26001607f1b87612835565b6117ec91906128ba565b94505b6615fc21041027af603f1b85136118365761180e600160821b8561296b565b93506615fc21041027af603f1b6118296001607f1b87612835565b61183391906128ba565b94505b660960aadc109e7b60461b851361187d57611855600160811b8561296b565b9350660960aadc109e7b60461b6118706001607f1b87612835565b61187a91906128ba565b94505b660454aaa8efe073604a1b85136118c45761189c600160801b8561296b565b9350660454aaa8efe073604a1b6118b76001607f1b87612835565b6118c191906128ba565b94505b6602f16ac6c59de7604c1b851361190b576118e36001607f1b8561296b565b93506602f16ac6c59de7604c1b6118fe6001607f1b87612835565b61190891906128ba565b94505b6609b4597e37cb05604b1b85136119525761192a6001607e1b8561296b565b93506609b4597e37cb05604b1b6119456001607f1b87612835565b61194f91906128ba565b94505b6618ebef9eac820b604a1b8513611999576119716001607d1b8561296b565b93506618ebef9eac820b604a1b61198c6001607f1b87612835565b61199691906128ba565b94505b6f70f5a893b608861e1f58934f97aea57d85136119ec576119be6001607c1b8561296b565b93506f70f5a893b608861e1f58934f97aea57d6119df6001607f1b87612835565b6119e991906128ba565b94505b6119fa6001607f1b8661296b565b92508291506001607f1b611a0e8380612835565b611a1891906128ba565b9050600160801b611a29848261296b565b611a339084612835565b611a3d91906128ba565b611a479085612992565b93506001607f1b611a588284612835565b611a6291906128ba565b9150600160811b611a83846faaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa61296b565b611a8d9084612835565b611a9791906128ba565b611aa19085612992565b93506001607f1b611ab28284612835565b611abc91906128ba565b9150600360801b611add846f9999999999999999999999999999999961296b565b611ae79084612835565b611af191906128ba565b611afb9085612992565b93506001607f1b611b0c8284612835565b611b1691906128ba565b9150600160821b611b37846f9249249249249249249249249249249261296b565b611b419084612835565b611b4b91906128ba565b611b559085612992565b93506001607f1b611b668284612835565b611b7091906128ba565b9150600560801b611b91846f8e38e38e38e38e38e38e38e38e38e38e61296b565b611b9b9084612835565b611ba591906128ba565b611baf9085612992565b93506001607f1b611bc08284612835565b611bca91906128ba565b9150600360811b611beb846f8ba2e8ba2e8ba2e8ba2e8ba2e8ba2e8b61296b565b611bf59084612835565b611bff91906128ba565b611c099085612992565b93506001607f1b611c1a8284612835565b611c2491906128ba565b9150600760801b611c45846f89d89d89d89d89d89d89d89d89d89d8961296b565b611c4f9084612835565b611c5991906128ba565b611c639085612992565b93506001607f1b611c748284612835565b611c7e91906128ba565b9150600160831b611c9f846f8888888888888888888888888888888861296b565b611ca99084612835565b611cb391906128ba565b610f339085612992565b6000611ccd6101ff607c1b6126a4565b821215611cdc57506000919050565b81600003611cef57506001607f1b919050565b6000821315611d1457604051631086170d60e01b815260048101839052602401611700565b600080611d256001607c1b856129ba565b91508190506001607f1b611d398280612835565b611d4391906128ba565b9050611d57816710e1b3be415a0000612835565b611d619084612992565b92506001607f1b611d728383612835565b611d7c91906128ba565b9050611d90816705a0913f6b1e0000612835565b611d9a9084612992565b92506001607f1b611dab8383612835565b611db591906128ba565b9050611dc981670168244fdac78000612835565b611dd39084612992565b92506001607f1b611de48383612835565b611dee91906128ba565b9050611e0181664807432bc18000612835565b611e0b9084612992565b92506001607f1b611e1c8383612835565b611e2691906128ba565b9050611e3981660c0135dca04000612835565b611e439084612992565b92506001607f1b611e548383612835565b611e5e91906128ba565b9050611e71816601b707b1cdc000612835565b611e7b9084612992565b92506001607f1b611e8c8383612835565b611e9691906128ba565b9050611ea8816536e0f639b800612835565b611eb29084612992565b92506001607f1b611ec38383612835565b611ecd91906128ba565b9050611edf81650618fee9f800612835565b611ee99084612992565b92506001607f1b611efa8383612835565b611f0491906128ba565b9050611f1581649c197dcc00612835565b611f1f9084612992565b92506001607f1b611f308383612835565b611f3a91906128ba565b9050611f4b81640e30dce400612835565b611f559084612992565b92506001607f1b611f668383612835565b611f7091906128ba565b9050611f818164012ebd1300612835565b611f8b9084612992565b92506001607f1b611f9c8383612835565b611fa691906128ba565b9050611fb6816317499f00612835565b611fc09084612992565b92506001607f1b611fd18383612835565b611fdb91906128ba565b9050611feb816301a9d480612835565b611ff59084612992565b92506001607f1b6120068383612835565b61201091906128ba565b905061201f81621c6380612835565b6120299084612992565b92506001607f1b61203a8383612835565b61204491906128ba565b9050612053816201c638612835565b61205d9084612992565b92506001607f1b61206e8383612835565b61207891906128ba565b905061208681611ab8612835565b6120909084612992565b92506001607f1b6120a18383612835565b6120ab91906128ba565b90506120b98161017c612835565b6120c39084612992565b92506001607f1b6120d48383612835565b6120de91906128ba565b90506120eb816014612835565b6120f59084612992565b92506001607f1b6121068383612835565b61211091906128ba565b905061211d816001612835565b6121279084612992565b92506001607f1b826121416721c3677c82b40000866128ba565b61214b9190612992565b6121559190612992565b9250612160846126a4565b9350600160841b8416156121a6577243cbaf42a000812488fc5c220ad7b97bf6e99e6121996cf1aaddd7742e56d32fb9f9974485612835565b6121a391906128ba565b92505b600160831b8416156121eb577105d27a9f51c31b7c2f8038212a05747799916121de6e0afe10820813d65dfe6a33c07f738f85612835565b6121e891906128ba565b92505b600160821b84161561223057701b4c902e273a58678d6d3bfdb93db96d026122236f02582ab704279e8efd15e0265855c47a85612835565b61222d91906128ba565b92505b600160811b841615612275577003b1cc971a9bb5b9867477440d6d1577506122686f1152aaa3bf81cb9fdb76eae12d02957185612835565b61227291906128ba565b92505b600160801b8416156122ba5770015bf0a8b1457695355fb8ac404e7a79e36122ad6f2f16ac6c59de6f8d5d6f63c1482a7c8685612835565b6122b791906128ba565b92505b6001607f1b8416156122fe576fd3094c70f034de4b96ff7d5b6f99fcd86122f16f4da2cbf1be5827f9eb3ad1aa9866ebb385612835565b6122fb91906128ba565b92505b6001607e1b841615612342576fa45af1e1f40c333b3de1db4dd55f29a76123356f63afbe7ab2082ba1a0ae5e4eb1b479dc85612835565b61233f91906128ba565b92505b6001607d1b841615612386576f910b022db7ae67ce76b441c27035c6a16123796f70f5a893b608861e1f58934f97aea57d85612835565b61238391906128ba565b92505b6001607c1b8416156123c7576f88415abbe9a76bead8d00cf112e4d4a86123bd6f783eafef1c0a8f3978c7f81824d62ebf85612835565b61062c91906128ba565b5050919050565b60006001607f1b6116d08385612835565b6000610dc362093a80836127ec565b6000806124237f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b0316639017a13c856040518263ffffffff1660e01b815260040161245091815260200190565b602060405180830381865afa15801561246d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906124919190612719565b905060006124c77f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316611584565b6001600160a01b031663be8b6163866040518263ffffffff1660e01b81526004016124f491815260200190565b602060405180830381865afa158015612511573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906125359190612719565b9050818411156125585760405163107503e960e21b815260040160405180910390fd5b8160000361256b57600092505050610dc3565b816125768286612800565b610dbe91906127ec565b6001600160a01b038116811461259557600080fd5b50565b6000806000606084860312156125ad57600080fd5b83356125b881612580565b95602085013595506040909401359392505050565b6000602082840312156125df57600080fd5b813561039b81612580565b600080604083850312156125fd57600080fd5b50508035926020909101359150565b80516001600160801b038116811461063157600080fd5b6000806040838503121561263657600080fd5b61263f8361260c565b915061264d6020840161260c565b90509250929050565b6001600160a01b0391909116815260200190565b6000806040838503121561267d57600080fd5b505080516020909101519092909150565b634e487b7160e01b600052601160045260246000fd5b6000600160ff1b82016126b9576126b961268e565b5060000390565b81810381811115610dc357610dc361268e565b80820180821115610dc357610dc361268e565b6001600160a01b0392831681529116602082015260400190565b6001600160a01b03929092168252602082015260400190565b60006020828403121561272b57600080fd5b5051919050565b600060a0828403121561274457600080fd5b60405160a0810181811067ffffffffffffffff8211171561277557634e487b7160e01b600052604160045260246000fd5b604052825161278381612580565b80825250602083015160208201526040830151604082015260608301516060820152608083015160808201528091505092915050565b6000602082840312156127cb57600080fd5b815161039b81612580565b634e487b7160e01b600052601260045260246000fd5b6000826127fb576127fb6127d6565b500490565b600081600019048311821515161561281a5761281a61268e565b500290565b634e487b7160e01b600052600160045260246000fd5b60006001600160ff1b038184138284138082168684048611161561285b5761285b61268e565b600160ff1b600087128281168783058912161561287a5761287a61268e565b600087129250878205871284841616156128965761289661268e565b878505871281841616156128ac576128ac61268e565b505050929093029392505050565b6000826128c9576128c96127d6565b600160ff1b8214600019841416156128e3576128e361268e565b500590565b6000606082840312156128fa57600080fd5b6040516060810181811067ffffffffffffffff8211171561292b57634e487b7160e01b600052604160045260246000fd5b80604052508251815260208301516020820152604083015160408201528091505092915050565b6000600182016129645761296461268e565b5060010190565b818103600083128015838313168383128216171561298b5761298b61268e565b5092915050565b80820182811260008312801582168215821617156129b2576129b261268e565b505092915050565b6000826129c9576129c96127d6565b50079056fea2646970667358221220217deff99a19960fa8d0111bcafe2191479cb9dc972d405be50221ecbcf849e464736f6c63430008100033",
  "deployedBytecode": "0x608060405234801561001057600080fd5b50600436106100785760003560e01c806317bc7d471461007d5780633d9d3f34146100a35780635763dbd0146100b657806377bb1411146100c95780638a440b00146100e6578063a265cbdf146100f9578063cc323aee1461010c578063dc01f60d1461011f575b600080fd5b61009061008b366004612598565b610132565b6040519081526020015b60405180910390f35b6100906100b13660046125cd565b6103a2565b6100906100c43660046125cd565b610636565b6100d161083a565b6040805192835260208301919091520161009a565b6100d16100f43660046125cd565b610993565b6100906101073660046125cd565b610a4c565b61009061011a3660046125ea565b610d05565b61009061012d3660046125cd565b610dc9565b60008060006101697f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610f3c565b6001600160a01b031663db1d0fd56040518163ffffffff1660e01b81526004016040805180830381865afa1580156101a5573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906101c99190612623565b6001600160801b031691506001600160801b0316915060006102137f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661100c565b6001600160a01b031663427d7432886040518263ffffffff1660e01b815260040161023e9190612656565b6040805180830381865afa15801561025a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061027e919061266a565b91505060006102b57f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661109e565b6001600160a01b031663427d7432896040518263ffffffff1660e01b81526004016102e09190612656565b6040805180830381865afa1580156102fc573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610320919061266a565b9150829050600088121561034857610337886126a4565b61034190826126c0565b9050610355565b61035288826126d3565b90505b81600088121561037957610368886126a4565b61037290826126c0565b9050610386565b61038388826126d3565b90505b61039282828888611131565b96505050505050505b9392505050565b60006103d67f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661120c565b6001600160a01b03166395e155c130336040518363ffffffff1660e01b81526004016104039291906126e6565b60006040518083038186803b15801561041b57600080fd5b505afa15801561042f573d6000803e3d6000fd5b5050505061043c8261129f565b5060006104717f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661100c565b6001600160a01b031663427d7432846040518263ffffffff1660e01b815260040161049c9190612656565b6040805180830381865afa1580156104b8573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906104dc919061266a565b91505060006105137f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661109e565b6001600160a01b031663427d7432856040518263ffffffff1660e01b815260040161053e9190612656565b6040805180830381865afa15801561055a573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061057e919061266a565b9150506105b37f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b031663c47deec8856105cc8585610d05565b6040518363ffffffff1660e01b81526004016105e9929190612700565b6020604051808303816000875af1158015610608573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061062c9190612719565b925050505b919050565b600061066a7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661120c565b6001600160a01b03166395e155c130336040518363ffffffff1660e01b81526004016106979291906126e6565b60006040518083038186803b1580156106af57600080fd5b505afa1580156106c3573d6000803e3d6000fd5b505050506106d08261129f565b90506107047f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610f3c565b6001600160a01b0316635aa0c7f8836040518263ffffffff1660e01b815260040161072f9190612656565b600060405180830381600087803b15801561074957600080fd5b505af115801561075d573d6000803e3d6000fd5b505050506107937f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316611584565b6001600160a01b0316633f1689ea83836040518363ffffffff1660e01b81526004016107c0929190612700565b600060405180830381600087803b1580156107da57600080fd5b505af11580156107ee573d6000803e3d6000fd5b50505050816001600160a01b03167ffc30cddea38e2bf4d6ea7d3f9ed3b6ad7f176419f4963bd81318067a4aee73fe8260405161082d91815260200190565b60405180910390a2919050565b60008061086f7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b0316639017a13c610885611617565b6040518263ffffffff1660e01b81526004016108a391815260200190565b602060405180830381865afa1580156108c0573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906108e49190612719565b6109167f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b0316639017a13c61092c611627565b6040518263ffffffff1660e01b815260040161094a91815260200190565b602060405180830381865afa158015610967573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061098b9190612719565b915091509091565b60008060006109ca7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b031663a5f2f667856040518263ffffffff1660e01b81526004016109f59190612656565b60a060405180830381865afa158015610a12573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610a369190612732565b9050806020015181604001519250925050915091565b6000610a807f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661120c565b6001600160a01b03166395e155c130336040518363ffffffff1660e01b8152600401610aad9291906126e6565b60006040518083038186803b158015610ac557600080fd5b505afa158015610ad9573d6000803e3d6000fd5b50505050610ae68261129f565b50600080610b1c7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661100c565b6001600160a01b031663427d7432856040518263ffffffff1660e01b8152600401610b479190612656565b6040805180830381865afa158015610b63573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610b87919061266a565b91509150600080610bc07f00000000000000000000000000000000000000000000000000000000000000006001600160a01b031661109e565b6001600160a01b031663427d7432876040518263ffffffff1660e01b8152600401610beb9190612656565b6040805180830381865afa158015610c07573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610c2b919061266a565b91509150610c617f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b031663199db43d87610c7a8786610d05565b610c848786610d05565b6040516001600160e01b031960e086901b1681526001600160a01b039093166004840152602483019190915260448201526064016020604051808303816000875af1158015610cd7573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610cfb9190612719565b9695505050505050565b6000806000610d3c7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610f3c565b6001600160a01b031663db1d0fd56040518163ffffffff1660e01b81526004016040805180830381865afa158015610d78573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610d9c9190612623565b6001600160801b031691506001600160801b03169150610dbe85858484611131565b925050505b92915050565b600080610dfe7f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610f3c565b6001600160a01b031663cafd9ae2846040518263ffffffff1660e01b8152600401610e299190612656565b602060405180830381865afa158015610e46573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610e6a9190612719565b90506000610ea07f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b031663a5f2f667856040518263ffffffff1660e01b8152600401610ecb9190612656565b60a060405180830381865afa158015610ee8573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610f0c9190612732565b90506000610f2782608001518360200151846040015161163c565b9050610f3381846126d3565b95945050505050565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015610f7c573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610fa091906127b9565b60405163ce10a0d360e01b8152600760048201526001600160a01b03919091169063ce10a0d3906024015b602060405180830381865afa158015610fe8573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250810190610dc391906127b9565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa15801561104c573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061107091906127b9565b60405163ce10a0d360e01b81526004818101526001600160a01b03919091169063ce10a0d390602401610fcb565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa1580156110de573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061110291906127b9565b60405163ce10a0d360e01b8152600360048201526001600160a01b03919091169063ce10a0d390602401610fcb565b6000611148620f4240670de0b6b3a76400006127ec565b6111529085612800565b9350818311156111645761116461281f565b84158061116f575083155b1561117c57506000611204565b83850361118a575083611204565b8385106000816111a35761119e86886116bf565b6111ad565b6111ad87876116bf565b905060006111d885876111bf856116da565b6111c99190612835565b6111d391906128ba565b611cbd565b905082156111f4576111ea87826123ce565b9350505050611204565b6111fe87826116bf565b93505050505b949350505050565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa15801561124c573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061127091906127b9565b60405163ce10a0d360e01b8152600160048201526001600160a01b03919091169063ce10a0d390602401610fcb565b600060016112ab611617565b6112b591906126c0565b6112e77f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316611584565b6001600160a01b031663c5a3f9076040518163ffffffff1660e01b8152600401602060405180830381865afa158015611324573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906113489190612719565b10156113d3576113807f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316611584565b6001600160a01b031663fe07bb076040518163ffffffff1660e01b8152600401600060405180830381600087803b1580156113ba57600080fd5b505af11580156113ce573d6000803e3d6000fd5b505050505b60006114077f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b031663a972985e846040518263ffffffff1660e01b81526004016114329190612656565b6060604051808303816000875af1158015611451573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061147591906128e8565b9050600061149082604001518360000151846020015161163c565b90506114c47f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316610f3c565b6001600160a01b031663ab66f5fa85836040518363ffffffff1660e01b81526004016105e9929190612700565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa158015611531573d6000803e3d6000fd5b505050506040513d601f19601f8201168201806040525081019061155591906127b9565b60405163ce10a0d360e01b8152600260048201526001600160a01b03919091169063ce10a0d390602401610fcb565b6000816001600160a01b031663f887ea406040518163ffffffff1660e01b8152600401602060405180830381865afa1580156115c4573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906115e891906127b9565b60405163ce10a0d360e01b8152600860048201526001600160a01b03919091169063ce10a0d390602401610fcb565b6000611622426123df565b905090565b6000611631611617565b6116229060016126d3565b6000821561166a5761164c611617565b84101561166a5761165d84846123ee565b61166790826126d3565b90505b811561039b57600061167d8560016126d3565b90505b611688611617565b8110156116b75761169981846123ee565b6116a390836126d3565b9150806116af81612952565b915050611680565b509392505050565b6000816116d06001607f1b85612835565b61039b91906128ba565b60006001607f1b82131561170957604051633ce23a3d60e11b8152600481018390526024015b60405180910390fd5b6000821361172d576040516330ecaa3d60e21b815260048101839052602401611700565b6001607f1b820361174057506000919050565b640733048c5a821361175a57610dc36101ff607c1b6126a4565b60008060006a01c8464f7616476000000085136117a85761177f600160841b8561296b565b93506a01c8464f7616476000000061179b6001607f1b87612835565b6117a591906128ba565b94505b660f1aaddd7742e960341b85136117ef576117c7600160831b8561296b565b9350660f1aaddd7742e960341b6117e26001607f1b87612835565b6117ec91906128ba565b94505b6615fc21041027af603f1b85136118365761180e600160821b8561296b565b93506615fc21041027af603f1b6118296001607f1b87612835565b61183391906128ba565b94505b660960aadc109e7b60461b851361187d57611855600160811b8561296b565b9350660960aadc109e7b60461b6118706001607f1b87612835565b61187a91906128ba565b94505b660454aaa8efe073604a1b85136118c45761189c600160801b8561296b565b9350660454aaa8efe073604a1b6118b76001607f1b87612835565b6118c191906128ba565b94505b6602f16ac6c59de7604c1b851361190b576118e36001607f1b8561296b565b93506602f16ac6c59de7604c1b6118fe6001607f1b87612835565b61190891906128ba565b94505b6609b4597e37cb05604b1b85136119525761192a6001607e1b8561296b565b93506609b4597e37cb05604b1b6119456001607f1b87612835565b61194f91906128ba565b94505b6618ebef9eac820b604a1b8513611999576119716001607d1b8561296b565b93506618ebef9eac820b604a1b61198c6001607f1b87612835565b61199691906128ba565b94505b6f70f5a893b608861e1f58934f97aea57d85136119ec576119be6001607c1b8561296b565b93506f70f5a893b608861e1f58934f97aea57d6119df6001607f1b87612835565b6119e991906128ba565b94505b6119fa6001607f1b8661296b565b92508291506001607f1b611a0e8380612835565b611a1891906128ba565b9050600160801b611a29848261296b565b611a339084612835565b611a3d91906128ba565b611a479085612992565b93506001607f1b611a588284612835565b611a6291906128ba565b9150600160811b611a83846faaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa61296b565b611a8d9084612835565b611a9791906128ba565b611aa19085612992565b93506001607f1b611ab28284612835565b611abc91906128ba565b9150600360801b611add846f9999999999999999999999999999999961296b565b611ae79084612835565b611af191906128ba565b611afb9085612992565b93506001607f1b611b0c8284612835565b611b1691906128ba565b9150600160821b611b37846f9249249249249249249249249249249261296b565b611b419084612835565b611b4b91906128ba565b611b559085612992565b93506001607f1b611b668284612835565b611b7091906128ba565b9150600560801b611b91846f8e38e38e38e38e38e38e38e38e38e38e61296b565b611b9b9084612835565b611ba591906128ba565b611baf9085612992565b93506001607f1b611bc08284612835565b611bca91906128ba565b9150600360811b611beb846f8ba2e8ba2e8ba2e8ba2e8ba2e8ba2e8b61296b565b611bf59084612835565b611bff91906128ba565b611c099085612992565b93506001607f1b611c1a8284612835565b611c2491906128ba565b9150600760801b611c45846f89d89d89d89d89d89d89d89d89d89d8961296b565b611c4f9084612835565b611c5991906128ba565b611c639085612992565b93506001607f1b611c748284612835565b611c7e91906128ba565b9150600160831b611c9f846f8888888888888888888888888888888861296b565b611ca99084612835565b611cb391906128ba565b610f339085612992565b6000611ccd6101ff607c1b6126a4565b821215611cdc57506000919050565b81600003611cef57506001607f1b919050565b6000821315611d1457604051631086170d60e01b815260048101839052602401611700565b600080611d256001607c1b856129ba565b91508190506001607f1b611d398280612835565b611d4391906128ba565b9050611d57816710e1b3be415a0000612835565b611d619084612992565b92506001607f1b611d728383612835565b611d7c91906128ba565b9050611d90816705a0913f6b1e0000612835565b611d9a9084612992565b92506001607f1b611dab8383612835565b611db591906128ba565b9050611dc981670168244fdac78000612835565b611dd39084612992565b92506001607f1b611de48383612835565b611dee91906128ba565b9050611e0181664807432bc18000612835565b611e0b9084612992565b92506001607f1b611e1c8383612835565b611e2691906128ba565b9050611e3981660c0135dca04000612835565b611e439084612992565b92506001607f1b611e548383612835565b611e5e91906128ba565b9050611e71816601b707b1cdc000612835565b611e7b9084612992565b92506001607f1b611e8c8383612835565b611e9691906128ba565b9050611ea8816536e0f639b800612835565b611eb29084612992565b92506001607f1b611ec38383612835565b611ecd91906128ba565b9050611edf81650618fee9f800612835565b611ee99084612992565b92506001607f1b611efa8383612835565b611f0491906128ba565b9050611f1581649c197dcc00612835565b611f1f9084612992565b92506001607f1b611f308383612835565b611f3a91906128ba565b9050611f4b81640e30dce400612835565b611f559084612992565b92506001607f1b611f668383612835565b611f7091906128ba565b9050611f818164012ebd1300612835565b611f8b9084612992565b92506001607f1b611f9c8383612835565b611fa691906128ba565b9050611fb6816317499f00612835565b611fc09084612992565b92506001607f1b611fd18383612835565b611fdb91906128ba565b9050611feb816301a9d480612835565b611ff59084612992565b92506001607f1b6120068383612835565b61201091906128ba565b905061201f81621c6380612835565b6120299084612992565b92506001607f1b61203a8383612835565b61204491906128ba565b9050612053816201c638612835565b61205d9084612992565b92506001607f1b61206e8383612835565b61207891906128ba565b905061208681611ab8612835565b6120909084612992565b92506001607f1b6120a18383612835565b6120ab91906128ba565b90506120b98161017c612835565b6120c39084612992565b92506001607f1b6120d48383612835565b6120de91906128ba565b90506120eb816014612835565b6120f59084612992565b92506001607f1b6121068383612835565b61211091906128ba565b905061211d816001612835565b6121279084612992565b92506001607f1b826121416721c3677c82b40000866128ba565b61214b9190612992565b6121559190612992565b9250612160846126a4565b9350600160841b8416156121a6577243cbaf42a000812488fc5c220ad7b97bf6e99e6121996cf1aaddd7742e56d32fb9f9974485612835565b6121a391906128ba565b92505b600160831b8416156121eb577105d27a9f51c31b7c2f8038212a05747799916121de6e0afe10820813d65dfe6a33c07f738f85612835565b6121e891906128ba565b92505b600160821b84161561223057701b4c902e273a58678d6d3bfdb93db96d026122236f02582ab704279e8efd15e0265855c47a85612835565b61222d91906128ba565b92505b600160811b841615612275577003b1cc971a9bb5b9867477440d6d1577506122686f1152aaa3bf81cb9fdb76eae12d02957185612835565b61227291906128ba565b92505b600160801b8416156122ba5770015bf0a8b1457695355fb8ac404e7a79e36122ad6f2f16ac6c59de6f8d5d6f63c1482a7c8685612835565b6122b791906128ba565b92505b6001607f1b8416156122fe576fd3094c70f034de4b96ff7d5b6f99fcd86122f16f4da2cbf1be5827f9eb3ad1aa9866ebb385612835565b6122fb91906128ba565b92505b6001607e1b841615612342576fa45af1e1f40c333b3de1db4dd55f29a76123356f63afbe7ab2082ba1a0ae5e4eb1b479dc85612835565b61233f91906128ba565b92505b6001607d1b841615612386576f910b022db7ae67ce76b441c27035c6a16123796f70f5a893b608861e1f58934f97aea57d85612835565b61238391906128ba565b92505b6001607c1b8416156123c7576f88415abbe9a76bead8d00cf112e4d4a86123bd6f783eafef1c0a8f3978c7f81824d62ebf85612835565b61062c91906128ba565b5050919050565b60006001607f1b6116d08385612835565b6000610dc362093a80836127ec565b6000806124237f00000000000000000000000000000000000000000000000000000000000000006001600160a01b03166114f1565b6001600160a01b0316639017a13c856040518263ffffffff1660e01b815260040161245091815260200190565b602060405180830381865afa15801561246d573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906124919190612719565b905060006124c77f00000000000000000000000000000000000000000000000000000000000000006001600160a01b0316611584565b6001600160a01b031663be8b6163866040518263ffffffff1660e01b81526004016124f491815260200190565b602060405180830381865afa158015612511573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052508101906125359190612719565b9050818411156125585760405163107503e960e21b815260040160405180910390fd5b8160000361256b57600092505050610dc3565b816125768286612800565b610dbe91906127ec565b6001600160a01b038116811461259557600080fd5b50565b6000806000606084860312156125ad57600080fd5b83356125b881612580565b95602085013595506040909401359392505050565b6000602082840312156125df57600080fd5b813561039b81612580565b600080604083850312156125fd57600080fd5b50508035926020909101359150565b80516001600160801b038116811461063157600080fd5b6000806040838503121561263657600080fd5b61263f8361260c565b915061264d6020840161260c565b90509250929050565b6001600160a01b0391909116815260200190565b6000806040838503121561267d57600080fd5b505080516020909101519092909150565b634e487b7160e01b600052601160045260246000fd5b6000600160ff1b82016126b9576126b961268e565b5060000390565b81810381811115610dc357610dc361268e565b80820180821115610dc357610dc361268e565b6001600160a01b0392831681529116602082015260400190565b6001600160a01b03929092168252602082015260400190565b60006020828403121561272b57600080fd5b5051919050565b600060a0828403121561274457600080fd5b60405160a0810181811067ffffffffffffffff8211171561277557634e487b7160e01b600052604160045260246000fd5b604052825161278381612580565b80825250602083015160208201526040830151604082015260608301516060820152608083015160808201528091505092915050565b6000602082840312156127cb57600080fd5b815161039b81612580565b634e487b7160e01b600052601260045260246000fd5b6000826127fb576127fb6127d6565b500490565b600081600019048311821515161561281a5761281a61268e565b500290565b634e487b7160e01b600052600160045260246000fd5b60006001600160ff1b038184138284138082168684048611161561285b5761285b61268e565b600160ff1b600087128281168783058912161561287a5761287a61268e565b600087129250878205871284841616156128965761289661268e565b878505871281841616156128ac576128ac61268e565b505050929093029392505050565b6000826128c9576128c96127d6565b600160ff1b8214600019841416156128e3576128e361268e565b500590565b6000606082840312156128fa57600080fd5b6040516060810181811067ffffffffffffffff8211171561292b57634e487b7160e01b600052604160045260246000fd5b80604052508251815260208301516020820152604083015160408201528091505092915050565b6000600182016129645761296461268e565b5060010190565b818103600083128015838313168383128216171561298b5761298b61268e565b5092915050565b80820182811260008312801582168215821617156129b2576129b261268e565b505092915050565b6000826129c9576129c96127d6565b50079056fea2646970667358221220217deff99a19960fa8d0111bcafe2191479cb9dc972d405be50221ecbcf849e464736f6c63430008100033",
  "devdoc": {
    "events": {
      "RewardsClaimed(address,uint256)": {
        "params": {
          "owner": "the owner claiming rewards",
          "rewards": "amount of fidu claimed"
        }
      }
    },
    "kind": "dev",
    "methods": {
      "calculateMembershipScore(uint256,uint256)": {
        "params": {
          "capital": "Amount of capital in USDC",
          "gfi": "Amount of gfi"
        },
        "returns": {
          "_0": "membership score"
        }
      },
      "claimableRewards(address)": {
        "params": {
          "owner": "address to calculate claimable rewards for"
        },
        "returns": {
          "_0": "the amount of rewards that could be claimed by the caller"
        }
      },
      "collectRewards(address)": {
        "params": {
          "owner": "address to claim rewards for"
        },
        "returns": {
          "rewards": "amount of yield enhancements collected"
        }
      },
      "consumeDeposit(address)": {
        "params": {
          "owner": "address that performed the depositing"
        },
        "returns": {
          "_0": "id of membership position"
        }
      },
      "consumeWithdraw(address)": {
        "params": {
          "owner": "address that performed the withdrawing"
        },
        "returns": {
          "_0": "id of membership position"
        }
      },
      "currentScore(address)": {
        "params": {
          "owner": "address to check the score of"
        },
        "returns": {
          "eligibleScore": "score that is currently eligible for rewards",
          "totalScore": "score that will be elgible for rewards next epoch"
        }
      },
      "estimateMemberScore(address,int256,int256)": {
        "params": {
          "capital": "the change in gfi holdings, denominated in USDC",
          "gfi": "the change in gfi holdings, denominated in GFI",
          "memberAddress": "the member's address"
        },
        "returns": {
          "score": "resulting score for the member given the GFI and capital changes"
        }
      },
      "totalMemberScores()": {
        "returns": {
          "eligibleTotal": "sum of all member scores that are currently eligible",
          "nextEpochTotal": "sum of all member scores that will be eligible next epoch"
        }
      }
    },
    "version": 1
  },
  "userdoc": {
    "errors": {
      "ExpTooLarge(int256)": [
        {
          "notice": "Thrown when exp is given too large of an argument"
        }
      ],
      "LnNonRealResult(int256)": [
        {
          "notice": "Thrown when the natural log would have returned a number outside of "
        }
      ],
      "LnTooLarge(int256)": [
        {
          "notice": "Thrown when the natural log function is given too large of an argument"
        }
      ]
    },
    "events": {
      "RewardsClaimed(address,uint256)": {
        "notice": "Emitted when `owner` claims fidu `rewards`"
      }
    },
    "kind": "user",
    "methods": {
      "calculateMembershipScore(uint256,uint256)": {
        "notice": "Calculate the membership score"
      },
      "claimableRewards(address)": {
        "notice": "Check how many rewards are claimable for the caller. The return  value here is how much would be retrieved by calling `collectRewards`."
      },
      "collectRewards(address)": {
        "notice": "Collect all membership yield enhancements for the caller."
      },
      "consumeDeposit(address)": {
        "notice": "Notify that the owner has deposited some assets, which  may affect membership."
      },
      "consumeWithdraw(address)": {
        "notice": "Notify that the owner has withdrawn some assets, which  may affect membership."
      },
      "currentScore(address)": {
        "notice": "Get the current score of `owner`"
      },
      "estimateMemberScore(address,int256,int256)": {
        "notice": "Estimate the score for an existing member, given some changes in GFI and capital"
      },
      "totalMemberScores()": {
        "notice": "Get the sum of all member scores that are currently eligible and that will be eligible next epoch"
      }
    },
    "version": 1
  },
  "storageLayout": {
    "storage": [
      {
        "astId": 660,
        "contract": "contracts/protocol/core/membership/MembershipDirector.sol:MembershipDirector",
        "label": "_initialized",
        "offset": 0,
        "slot": "0",
        "type": "t_bool"
      },
      {
        "astId": 663,
        "contract": "contracts/protocol/core/membership/MembershipDirector.sol:MembershipDirector",
        "label": "_initializing",
        "offset": 1,
        "slot": "0",
        "type": "t_bool"
      }
    ],
    "types": {
      "t_bool": {
        "encoding": "inplace",
        "label": "bool",
        "numberOfBytes": "1"
      }
    }
  }
}